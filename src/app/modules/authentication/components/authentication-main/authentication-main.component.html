<div class="container-fluid auth-container">


  <div class="row All-content">
    <div class="col-lg-4 sidebar d-none d-sm-block">


    </div>
    <div class="col-lg-8 end-side">

      <div class="inner">


        <div class="header-images d-flex">
          <img class="first-img" src="assets/images/Login/elSharkaHeader.svg" alt="">
          <div class="language mt-3">
            <a (click)="changeLanguage()">
              <p [class]="languge=='ar'? 'font-en' : 'font-ar'">{{languge=='en' ? 'عربي': 'English'}}</p>
            </a>
          </div>

        </div>

        <div class="content" >

          <ng-container *ngIf="!loginInProgress">
            <div class="form-header">
              <h4 class="color-gray-400">{{'Welcome'|translate}}<img class="handimg" src="assets/images/Login/hand.png">
              </h4>
              <h1 class="mb-4 color-primary"><b>{{'Login' | translate}}</b></h1>
              <h6>{{'Please enter your email and password' | translate}}</h6>
            </div>


            <div class="custom-form custom-validation-form my-5 container position-relative">
              <form [formGroup]="loginForm" (ngSubmit)="onNext()" autocomplete="off">

                <!-- <input type="text" style="position: absolute; opacity: 0;">
                              <input type="password" style="position: absolute; opacity: 0;"> -->

                <div class="row gx-5 mb-4">
                  <div class="col-md-12">
                    <label for="email" class="label">{{'shared.Write email'|translate}} <span class="star">*</span></label>
                    <input type="text" readonly onclick="this.removeAttribute('readonly')" pInputText
                      formControlName="account" (ngModelChange)="checkValidators($event)" class="form-control "
                      placeholder="{{'shared.Write email'|translate}}" name="email" id="email">

                    <div [hidden]=" account.valid || account.untouched" class="passerror">
                      <small *ngIf="account?.errors?.['required']" id="helpId" class="form-text text-muted d-block  "
                        class="alert-danger">
                        {{'shared.This Field is Required'|translate}}
                        <fa-icon [icon]=" exclamationIcon" class="dangericon ms-1 "></fa-icon>
                      </small>

                      <small *ngIf="account?.errors?.['pattern']&&isEmail" id="helpId2"
                        class="form-text text-muted d-block " class="alert-danger">
                        {{'shared.Must be Valid Email'|translate}}
                        <fa-icon [icon]=" exclamationIcon" class="dangericon ms-1 "></fa-icon>
                      </small>
                      <small *ngIf="account?.errors?.['pattern']&&!isEmail" id="helpId2"
                        class="form-text text-muted d-block " class="alert-danger">
                        {{'shared.Mobile Must Start With 05 and Contain 10 Numbers Only'|translate}}
                        <fa-icon [icon]=" exclamationIcon" class="dangericon ms-1 "></fa-icon>
                      </small>
                    </div>

                  </div>
                </div>
                <div class="row gx-5 mb-1">
                  <div class=" col-md-12">

                    <label for="PID6" class="label">{{'Password'| translate}} <span class="star">*</span></label>
                    <p-password iconPos="left" formControlName="password"
                      [ngClass]="{'ng-invalid ng-dirty':password.errors?.['required']&& password.touched||password.errors?.['pattern'] && password.touched}"
                      [feedback]="false" [toggleMask]="true" name="password"
                      placeholder="{{'shared.Write Password'| translate}}"></p-password>
                    <div [hidden]="password.valid || password.untouched" class="passerror">
                      <small *ngIf="password.errors?.['required']" id="helpId" class="form-text text-muted d-block  "
                        class="alert-danger">
                        {{'shared.This Field is Required'|translate}}
                        <fa-icon [icon]=" exclamationIcon" class="dangericon ms-1 "></fa-icon>
                      </small>

                    </div>
                  </div>
                </div>
                <div class="forget-password mb-5 ">
                  <a (click)="openForgetModel()" class="color-skyBlue-400">{{'Forgot password?' | translate}}</a>
                </div>
                <button class="btn btn-primary mb-4" [disabled]="isBtnLoading">{{'Login'| translate}}
                  <div class="spinner-border text-light" role="status" [hidden]="!isBtnLoading"></div>
                </button>


              </form>
              <button (click)="signWithIdentity()" class="btn mb-4 identity">
                <img src="assets/images/Login/identity.svg" alt="">
                <p>{{'Sign in with UAE PASS' | translate}}</p>
              </button>

              <div class="d-flex justify-content-center ">

                <!-- <button class="color-gray-600 position-relative fs-4" #container tooltipPosition="bottom"
                  [fitContent]="true" [appendTo]="container"
                  pTooltip="{{'UAE PASS is a single trusted digital identity for all citizens, residents to United Arab Emirates' | translate}}">
                  {{'What is UAE PASS' | translate}}
                  <i class="pi pi-info-circle" style="font-size: 1.2rem"></i>
                </button> -->
                <button class="color-gray-600 position-relative fs-4 toolTip">
                  {{'What is UAE PASS' | translate}}
                  <i class="pi pi-info-circle" style="font-size: 1.2rem"></i>

                  <div class="tip position-absolute ">
                    <p class="mb-2">{{'UAE PASS is a single trusted digital identity for all citizens, residents to United Arab Emirates' | translate}}</p>
                    <a class="color-gray-800 text-decoration-underline"  (click)="signWithIdentity()">{{'login.createAccount' |translate}}</a>
                  </div>
                </button>

              </div>
            </div>



            <div class=" text-center" (click)="openNewAccount()"><a class="color-skyBlue-400 text-decoration-underline">{{'login.Create New User Account' |translate}}</a></div>

          </ng-container>

          <div *ngIf="loginInProgress" class="form-header d-flex flex-column gap-3 align-items-center text-center mt-6">
            <div class="py-6"></div>
            <h4 class="color-gray-400">{{'Welcome'|translate}}<img style="width: 3rem;" src="assets/images/Login/hand.png">
            </h4>
            <h1 class="mb-4 color-primary"><b>{{'Login' | translate}}</b></h1>
            <div style="width:7rem; height: 7rem;" class="spinner spinner-border text-black" role="status" ></div>
          </div>


        </div>

      </div>
      <div class="py-6"></div>
    </div>
  </div>

</div>

<ng-container *ngIf="openNewAccountModel">
  <app-new-account openModel="openNewAccountModel"></app-new-account>
</ng-container>


<ng-container *ngIf="openForgetPasswordModel">
  <app-forget-password openForgetPasswordModel="openForgetPasswordModel"></app-forget-password>
</ng-container>

<ng-container *ngIf="openResetModel">
  <app-forget-password openResetModel="openResetModel"></app-forget-password>
</ng-container>



<div class="confirm-model">

  <p-dialog [(visible)]="openConfimModel" [closable]="false" [modal]="true" [style]="{width: '45vw'}" >
      <ng-template pTemplate="content">
         <div class="d-flex flex-column justify-content-center align-items-center gap-4">

                <img src="assets/images/Login/identity.svg" alt="">
                <p class="fs-3 text-center" > {{confirmationMessage}}</p>
         </div>
          <ng-container *ngIf="statusCode=='NotFound'">



                <div class="row gx-5 mt-5">
                  <div class="col-md-6">
                      <div class="d-flex ">
                          <p class="color-gray-300 ">{{ 'shared.Full Name'|translate }}</p>
                          <span class="color-primary mx-3">{{UAEUnregisteredUser?.fullName|currentLang}}</span>
                      </div>
                  </div>
                  <div class="col-md-6">

                    <div class="d-flex ">
                        <p class="color-gray-300 ">{{ 'shared.gender'|translate }}</p>
                        <span class="color-primary mx-3 ">{{'shared.genderType.'+UAEUnregisteredUser?.gender|translate}}</span>
                    </div>
                 </div>
                </div>
                <div class="row gx-5 mt-4">
                  <div class="col-md-6">

                    <div class="d-flex ">
                        <p class="color-gray-300 ">{{ 'sign up.phoneNumber'|translate }}</p>
                        <span class="color-primary mx-3 ">{{UAEUnregisteredUser?.mobile}}</span>
                    </div>

                </div>
                  <div class="col-md-6">
                    <div class="d-flex ">
                        <p class="color-gray-300 ">{{ 'shared.nationality'|translate }}</p>
                        <span class="color-primary mx-3 ">{{UAEUnregisteredUser?.nationality|currentLang}}</span>
                    </div>
                  </div>
                  </div>
                  <div class="row gx-5 mt-4">
                  <div class="col-md-12">
                      <div class="d-flex ">
                          <p class="color-gray-300 ">{{ 'dashboard.parents.emirateUid'|translate }}</p>
                          <span class="color-primary mx-3 ">{{UAEUnregisteredUser?.idn}}</span>
                      </div>
                  </div>
                  </div>
                  <div class="row gx-5 mt-4">
                    <div class="col-md-12">
                      <div class="d-flex ">
                        <p class="color-gray-300 ">{{ 'shared.email'|translate }}</p>
                        <span class="color-primary mx-3 mb-2">{{UAEUnregisteredUser?.email}}</span>
                     </div>
                    </div>
                  </div>


          </ng-container>

          <div class="d-flex align-items-center gap-4 justify-content-center mt-5">
            <ng-container *ngIf="statusCode=='NotFound'">
              <button (click)="openUAEAccount()" class="btn btn-primary" [disabled]="isUAeAccountBtnLoading">
                {{'sign up.SignUp' |translate}}
                <div class="spinner-border text-light" role="status" [hidden]="!isUAeAccountBtnLoading"></div>
              </button>
              <button (click)="closeConfirmationModel()" class="btn btn-primary " >{{'sign up.BackToLogin' |translate}}</button>
            </ng-container>
                <button *ngIf="statusCode!='NotFound'" (click)="closeConfirmationModel()" class="btn btn-primary">{{'shared.close' |translate}}</button>
          </div>

      </ng-template>
  </p-dialog>
</div>



       <div id="content" >
        <div class=" d-flex align-items-center justify-content-end ">
            <div class="Btn-group d-flex  gap-3 align-items-center justify-content-end">

                <button type="submit" (click)="succeeded()" class="btn  btn-primary" [disabled]="subjectFormGrp.invalid||isBtnLoading" *permit="[ClaimsEnum.S_U_Subject,ClaimsEnum.S_C_Subject,ClaimsEnum.E_C_Subject]">
                    {{'shared.save'|translate}}
                    <div class="spinner-border text-light" role="status" *ngIf="isBtnLoading"></div>
                </button>

                <button  (click)="back()"><a  class="cancelbtn">{{'shared.cancel'|translate}}</a></button>

                <!-- <button *ngIf="currentUserScope==userScope.SPEA && !schoolId" ><a routerLink="/educational-settings/subject/subjects-list" class="cancelbtn">{{'shared.cancel'|translate}}</a></button>

                <button *ngIf="currentUserScope==userScope.SPEA&&schoolId" ><a routerLink="/schools-and-students/schools/school/{{schoolId}}" class="cancelbtn">{{'shared.cancel'|translate}}</a></button>

                <button *ngIf="currentUserScope==userScope.Employee" ><a routerLink="/school-management/school/{{schoolId}}/subjects" class="cancelbtn">{{'shared.cancel'|translate}}</a></button> -->
            </div>
        </div>

          <div class=" mt-5 custom-form custom-validation-form border" >
            <ng-container *ngIf="!subject&&urlParameter">
                <div class="row g-5">

                        <app-skeleton count="6"  [style]="{'margin-bottom': '3rem'}"></app-skeleton>

                </div>

             </ng-container>
              <form [formGroup]="subjectFormGrp"  *ngIf="subject||!urlParameter">
                  <div class="row gx-5 form-set container-fluid ">
                      <div class="col-xs-2 col-lg-4 left">
                          <label for="PID" class="label">{{'dashboard.Subjects.Subject Name in Arabic'|translate}} <span class="star">*</span></label>
                          <input  type="text" pInputText  formControlName="subjectNameInArabic" [LangRestrict]="'ar'"  class="form-control "  placeholder="{{'dashboard.Subjects.Write Subject Name'|translate}}" name="PID" id="PID">
                          <div>
                            <div [hidden]="subjectNameInArabic.valid || subjectNameInArabic.untouched">
                                <small *ngIf="subjectNameInArabic.errors?.['required']"  id="helpId" class="form-text text-muted d-block  " class="alert-danger">
                                  {{'shared.This Field is Required'|translate}}
                                   <fa-icon  [icon]="exclamationIcon"  class="dangericon ms-1 "></fa-icon>
                                </small>

                                <small *ngIf="subjectNameInArabic.errors?.['maxlength']" id="helpId2" class="form-text text-muted d-block " class="alert-danger" >
                                    {{'shared.Numbres Of Characters must not more than 65 character'|translate}}
                                    <fa-icon  [icon]="exclamationIcon"  class="dangericon ms-1 "></fa-icon>
                                </small>


                             </div>
                             <small *ngIf="isSubjectNotUnique && !subjectNameInArabic.errors?.['maxlength'] && !subjectNameInArabic.errors?.['required']" id="helpId2" class="form-text text-muted d-block " class="alert-danger" >
                                {{'dashboard.Subjects.Subject Name Must Be Unique'|translate}}
                                <fa-icon  [icon]="exclamationIcon"  class="dangericon ms-1 "></fa-icon>
                            </small>

                            </div>
                      </div>
                      <div class="col-xs-2 col-lg-4">

                          <label for="PID2" class="label">{{'dashboard.Subjects.Subject Name in English'|translate}} <span class="star">*</span></label>
                          <input type="text" pInputText  formControlName="subjectNameInEnglish" [LangRestrict]="'en'" class="form-control  leftaction"  placeholder="{{'dashboard.Subjects.Write Subject Name'|translate}}" name="PID2" id="PID2">
                          <div>
                            <div [hidden]="subjectNameInEnglish.valid || subjectNameInEnglish.untouched">
                                <small *ngIf="subjectNameInEnglish.errors?.['required']"   class="form-text text-muted d-block  " class="alert-danger">
                                  {{'shared.This Field is Required'|translate}}
                                   <fa-icon  [icon]="exclamationIcon"  class="dangericon ms-1 "></fa-icon>
                                </small>

                                <small *ngIf="subjectNameInEnglish.errors?.['maxlength']" class="form-text text-muted d-block " class="alert-danger" >
                                    {{'shared.Numbres Of Characters must not more than 65 character'|translate}}
                                    <fa-icon  [icon]="exclamationIcon"  class="dangericon ms-1 "></fa-icon>
                                </small>

                             </div>
                             <small *ngIf="isSubjectNotUnique && !subjectNameInEnglish.errors?.['maxlength'] && !subjectNameInEnglish.errors?.['required']" id="helpId2" class="form-text text-muted d-block " class="alert-danger" >
                                {{'dashboard.Subjects.Subject Name Must Be Unique'|translate}}
                                <fa-icon  [icon]="exclamationIcon"  class="dangericon ms-1 "></fa-icon>
                            </small>

                            </div>

                      </div>
                      <div class="col-xs-2 col-lg-3 switch" >
                        <span class="status">{{'dashboard.Subjects.isExemptable'|translate}} <span class="star">*</span></span>
                        <p-inputSwitch  (onChange)="isToggleLabel($event)" formControlName="exemptableStatus"  ></p-inputSwitch>
                        <span class="Label" *ngIf="!isLabelShown && !urlParameter">{{'shared.no'|translate}}</span>
                        <span class="Label" *ngIf="isLabelShown && !urlParameter">{{'shared.yes'|translate}}</span>
                        <span class="Label" *ngIf="!subject?.isExemptableToLeave && urlParameter">{{'shared.no'|translate}}</span>
                        <span class="Label" *ngIf="subject?.isExemptableToLeave && urlParameter">{{'shared.yes'|translate}}</span>
                    </div>

                  </div>
                  <div class=" row gx-5 form-set container-fluid ">
                    <div class="col-xs-2 col-lg-4 left">

                        <label for="PID3" class="label">{{'dashboard.Subjects.Name in results screen in Arabic'|translate}} <span class="star">*</span></label>
                        <input type="text" pInputText  formControlName="nameInResultsScreenInArabic" [LangRestrict]="'ar'"  class="form-control " placeholder="{{'dashboard.Subjects.Write Name in results screen'|translate}}"  name="PID3" id="PID3">
                        <div>
                            <div [hidden]="nameInResultsScreenInArabic.valid || nameInResultsScreenInArabic.untouched">
                                <small *ngIf="nameInResultsScreenInArabic.errors?.['required']"  id="helpId" class="form-text text-muted d-block  " class="alert-danger">
                                  {{'shared.This Field is Required'|translate}}
                                   <fa-icon  [icon]="exclamationIcon"  class="dangericon ms-1 "></fa-icon>
                                </small>

                                <small *ngIf="nameInResultsScreenInArabic.errors?.['maxlength']" id="helpId2" class="form-text text-muted d-block " class="alert-danger" >
                                    {{'shared.Numbres Of Characters must not more than 65 character'|translate}}
                                    <fa-icon  [icon]="exclamationIcon"  class="dangericon ms-1 "></fa-icon>
                                </small>
                             </div>
                             <small *ngIf="isSubjectNotUnique && !nameInResultsScreenInArabic.errors?.['maxlength'] && !nameInResultsScreenInArabic.errors?.['required']" id="helpId2" class="form-text text-muted d-block " class="alert-danger" >
                                {{'dashboard.Subjects.Subject Name Must Be Unique'|translate}}
                                <fa-icon  [icon]="exclamationIcon"  class="dangericon ms-1 "></fa-icon>
                            </small>

                        </div>

                    </div>
                    <div class="col-xs-2 col-lg-4 "  >

                        <label for="PID4"  class="label">{{'dashboard.Subjects.Name in results screen in English'|translate}} <span class="star">*</span></label>
                        <input type="text" pInputText  formControlName="nameInResultsScreenInEnglish" [LangRestrict]="'en'" class="form-control  leftaction"  placeholder="{{'dashboard.Subjects.Write Name in results screen'|translate}}"  name="PID4" id="PID4">
                        <div>
                            <div [hidden]="nameInResultsScreenInEnglish.valid || nameInResultsScreenInEnglish.untouched">
                                <small *ngIf="nameInResultsScreenInEnglish.errors?.['required']"  id="helpId" class="form-text text-muted d-block  " class="alert-danger">
                                  {{'shared.This Field is Required'|translate}}
                                   <fa-icon  [icon]="exclamationIcon"  class="dangericon ms-1 "></fa-icon>
                                </small>

                                <small *ngIf="nameInResultsScreenInEnglish.errors?.['maxlength']" id="helpId2" class="form-text text-muted d-block " class="alert-danger" >
                                    {{'shared.Numbres Of Characters must not more than 65 character'|translate}}
                                    <fa-icon  [icon]="exclamationIcon"  class="dangericon ms-1 "></fa-icon>
                                </small>
                             </div>
                             <small *ngIf="isSubjectNotUnique && !nameInResultsScreenInEnglish.errors?.['maxlength'] && !nameInResultsScreenInEnglish.errors?.['required']" id="helpId2" class="form-text text-muted d-block " class="alert-danger" >
                                {{'dashboard.Subjects.Subject Name Must Be Unique'|translate}}
                                <fa-icon  [icon]="exclamationIcon"  class="dangericon ms-1 "></fa-icon>
                            </small>

                        </div>

                    </div>


                </div>
                <hr >
                <div class=" row gx-5 form-set mt-5 container-fluid ">
                    <div class="col-xs-2 col-lg-4 left">

                        <label for="PID7" class="label"> {{'dashboard.Subjects.DegreeCode'| translate}}</label>
                        <input type="text" pInputText formControlName="subjectCode"  class="form-control"  placeholder="{{'dashboard.schools.subject'|translate}}"  name="PID7" id="PID7">

                    </div>
                    <div class="col-xs-4 col-lg-7 evaluationSys" >
                        <div *ngFor="let type of evaluationTypeList" class="field-checkbox">
                            <p-radioButton [inputId]="type.value" [ngModelOptions]="{standalone: true}" formControlName="evaluationType"  (onClick)="checkEvaluationType($event.value)"  [value]="type.value"  ></p-radioButton>
                            <label [for]="type.value">{{type.name}}</label>
                        </div>
                    </div>

                </div>
                <hr >
                <div class=" row gx-5 form-set mt-5 container-fluid " *ngIf="showEvaluation">
                    <div class="col-xs-2 col-lg-4">
                        <label for="PID8" class="label">{{'dashboard.Subjects.select evaluation from old known evaluation'|translate}} <span class="star">*</span></label>
                          <p-dropdown [options]="oldAssesmentList" optionLabel="{{lang=='ar'? 'name.ar' :'name.en'}}" optionValue="id"  formControlName="oldEvaluation"   placeholder="{{'dashboard.Subjects.select evaluation from old known evaluation'|translate}}" name="PID8" id="PID8"   ></p-dropdown>
                    </div>

                </div>
                <div class=" row gx-5 form-set mt-5 container-fluid " *ngIf="showDegree||showIpPoints">
                    <div class="col-xs-2 col-lg-4 left">

                        <label for="PID7" class="label"> {{'dashboard.Subjects.minmum degree'| translate}} <span class="star">*</span></label>

                        <p-inputNumber formControlName="minmumDegree"  mode="decimal" [showButtons]="false"  inputId="minmax-buttons"     class="form-control number b-0"></p-inputNumber>
                        <div>
                            <div [hidden]="minmumDegree.valid || minmumDegree.untouched">
                                <small *ngIf="minmumDegree.errors?.['required']"  id="helpId" class="form-text text-muted d-block  " class="alert-danger">
                                  {{'shared.This Field is Required'|translate}}
                                   <fa-icon  [icon]="exclamationIcon"  class="dangericon ms-1 "></fa-icon>
                                </small>
                            </div>
                            <div [hidden]="!subjectFormGrp.errors?.['degreesMisMatch']||minmumDegree.errors?.['required']  ">
                                <small *ngIf="subjectFormGrp.errors?.['degreesMisMatch']" id="helpId3" class="form-text text-muted d-block " class="alert-danger" >
                                    {{'dashboard.Subjects.minimum degree Must Less than maxmumDegree'|translate}}
                                    <fa-icon  [icon]="exclamationIcon"  class="dangericon ms-1 "></fa-icon>
                                </small>

                             </div>
                        </div>
                    </div>

                    <div class="col-xs-2 col-lg-4 ">
                        <label for="PID7" class="label"> {{'dashboard.Subjects.maximum degree'| translate}} <span class="star">*</span></label>

                        <p-inputNumber formControlName="maximumDegree"  mode="decimal" [showButtons]="false"  inputId="minmax-buttons"    class="form-control number  b-0"   ></p-inputNumber>
                        <div>
                            <div [hidden]="maximumDegree.valid || maximumDegree.untouched">
                                <small *ngIf="maximumDegree.errors?.['required']"  id="helpId" class="form-text text-muted d-block  " class="alert-danger">
                                  {{'shared.This Field is Required'|translate}}
                                   <fa-icon  [icon]="exclamationIcon"  class="dangericon ms-1 "></fa-icon>
                                </small>
                            </div>
                            <div [hidden]="!subjectFormGrp.errors?.['degreesMisMatch']||maximumDegree.errors?.['required']">

                                <small *ngIf="subjectFormGrp.errors?.['degreesMisMatch']" id="helpId3" class="form-text text-muted d-block " class="alert-danger" >
                                    {{'dashboard.Subjects.maximum degree Must More than minmumDegree'|translate}}
                                    <fa-icon  [icon]="exclamationIcon"  class="dangericon ms-1 "></fa-icon>
                                </small>
                             </div>
                        </div>
                    </div>

                </div>
                <div  *ngIf="showDescription">
                    <div formArrayName="descriptionArr" >
                        <div *ngFor="let item of descriptionArr.controls ; let i=index" [formGroupName]="i">
                            <div class="row gx-5 form-set container-fluid ">
                                <div class="col-xs-2 col-lg-4">
                                    <label for="PP + {{i}}" class="label">{{'dashboard.Subjects.explanation'|translate}} <span class="star">*</span></label>
                                    <input type="text" pInputText  formControlName="description" class="form-control "  placeholder="{{'dashboard.Subjects.explanation'|translate}}"  id="PP + {{i}}" name="PPO + {{i}}">

                                </div>
                                <div class="col-xs-2 col-lg-4">

                                    <label for="cal3 + {{i}}" class="label">{{'dashboard.Subjects.meaning'|translate}} <span class="star">*</span></label>
                                    <input type="text" pInputText  formControlName="meaning" class="form-control "  placeholder="{{'dashboard.Subjects.meaning'|translate}}"  name="cal3O + {{i}}" id="cal3 + {{i}}">
                               </div>

                                <div class="col-xs-2 col-lg-4">
                                    <label for="cal4 + {{i}}" class="label">{{'dashboard.Subjects.successed'|translate}}/{{'dashboard.Subjects.retry'|translate}} <span class="star">*</span></label>
                                    <p-dropdown [options]="successStatusList" optionLabel="name" optionValue="status" formControlName="successfulRetry" placeholder="{{'dashboard.Subjects.successed'|translate}}/{{'dashboard.Subjects.retry'|translate}}" name="calO4 + {{i}}" id="cal4 + {{i}}"  ></p-dropdown>
                               </div>
                            </div>
                            <div class="btn btn-outline-primary Addnew mb-5" role="button" (click)="addNew()">
                                <fa-icon  [icon]="plusIcon" class="icon "></fa-icon>
                                {{'dashboard.Subjects.add description'|translate}}

                               </div>
                        </div>
                    </div>

                </div>



              </form>
            </div>


        </div>

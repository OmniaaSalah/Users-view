
<div class="parents" >
    <div class="box-shadow bg-white raduis-12 p-5">
        <h3 class="heading heading-secondary fw-bold m-0 mb-5">{{'dashboard.reports.ReportSummary'|translate}}</h3>
        <div class="row">
            <div class="col col-md-6">
                <h4 class="heading heading--tertiary mb-2">{{'dashboard.reports.RequestNumbersProcessedFromEmployees'|translate}}</h4>
                <p class="paragraph paragraph--sm">{{allRequestsNumbers}}</p>
            </div>
            <div class="col col-md-6">
                <h4 class="heading heading--tertiary mb-2">{{'dashboard.reports.RequestNumbersProcessedFromEmployeesBasedOnRequestType'|translate}}</h4>
                <p class="paragraph paragraph--sm">{{requestsNumbersBasedOnRequestType}}</p>
            </div>
        </div>
    </div>
    <div class="prim-table" *ngIf="users.totalAllData|| users.loading">
        <p-table #dt [value]="users.list"  sortMode="multiple">

            <ng-template pTemplate="caption">
                <app-table-caption (onExport)="onExport($event)" (onFilter)="getUsersList()" (onSearch)="filtration.KeyWord = $event; getUsersList()" (onClear)="clearFilter()">

                    <div class="row gx-5 form-set">
                       

                        <div class="col-12">
                            <label class="label"> {{'dashboard.reports.TimeFrom-To'|translate}} </label>
                            <p-calendar  [(ngModel)]="date" [showIcon]="true" inputId="icon" selectionMode="range"
                            placeholder="{{'dd/mm/yy'|translate}} - {{'dd/mm/yy'|translate}}" dateFormat="dd/mm/yy" [readonlyInput]="true" >
                           </p-calendar>
                        </div>
                       

                   

                    </div>
                    <div class="row gx-5 form-set">
                       
                        <div class="col-6">
                            <label class="label" for="city">{{'dashboard.Requests.requestType' |translate}} </label>
                            <p-dropdown  [ngModelOptions]="{standalone: true}"
                            [options]="requestsList" [showClear]="true"
                            [(ngModel)]="filtration.requestType" optionValue="value" optionLabel="name"
                            placeholder="{{'dashboard.Requests.SelectRequestType' |translate}}"
                            emptyMessage="{{'reports.There are no items' | translate}}"></p-dropdown>
                        </div>
                       
                        <div class="col-6">
                            <label class="label" for="city">{{'dashboard.UserInformation.Select Private Role'|translate }} </label>
                            <p-multiSelect 
                             [options]="roles" 
                            display="chip"
                            [(ngModel)]="filtration.roleIds"
                            optionValue="id" 
                            [ngModelOptions]="{standalone: true}" 
                            placeholder="{{'dashboard.UserInformation.Select Private Role' | translate}}" 
                            optionLabel="name.ar"></p-multiSelect>
                        </div>

                   

                    </div>

                    

                </app-table-caption>

            </ng-template>

            <ng-template pTemplate="header" et-columns="columns">
                <tr>
                    <ng-container *ngFor="let column of tableColumns" >
                        <th [pSortableColumn]="column.name" *ngIf="column.isSelected == true"> 
                            <!-- studentsReportsArray -->
                            <p-sortIcon field="{{column.name }}"></p-sortIcon>
                            <ng-container >{{column.name }}</ng-container> 
                     
                    </th>
                    </ng-container>

                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-e let-columns="columns">
                <tr>
                    
                    <td>{{e?.employeeName | currentLang}}</td>
                    <td>{{e?.email}}</td>
                    <td>{{e?.requestNumber}}</td>
                    <td>{{e?.phoneNumber}}</td>
                  

             
                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage" let-columns>

                <tr>
                    <td [attr.colspan]="20">
                        <ng-container *ngIf="users.totalAllData && users.list.length == 0 &&  !users.loading">

                            <app-informative-block title="{{'emptyList.noDataMatch' |translate}}" src="assets/images/empty-list/empty-list.svg"></app-informative-block>
                        </ng-container>
                        <app-loader></app-loader>

                    </td>

                </tr>

            </ng-template>
        </p-table>

        <div>
            <div *ngIf="paginationState.rows<users.total">
                <app-pagination [totalItems]="users.total" (paginationChanged)="onTableDataChange($event)"></app-pagination>
            </div>
        </div>

    </div>
    <ng-container *ngIf="!users.totalAllData &&  !users.loading">
        <app-informative-block title="{{'emptyList.employee' |translate}}" src="assets/images/empty-list/empty-list.svg"></app-informative-block>
    </ng-container>
</div>

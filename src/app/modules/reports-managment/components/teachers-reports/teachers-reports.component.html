



<div class="report form-set custom-form">

    <div class="prim-table mt-4" *ngIf="teachersReport.totalAllData || teachersReport.loading">
        <p-table #dt [value]="teachersReport.list" [lazy]="true" (onSort)="onSort($event)">

            <ng-template pTemplate="caption">
                <app-table-caption
                [seachKeyword]="filtration.KeyWord"
                (onExport)="onExport($event)"
                (onFilter)="filtration.Page=1;getTeachersReportList()"
                (onSearch)="filtration.Page=1;filtration.KeyWord = $event; getTeachersReportList()"
                (onClear)="clearFilter()">


                    <div class="row gx-5 form-set">
                        <div class="col-4">
                            <label class="label">{{'dashboard.students.schoolName'| translate}}</label>
                            <p-multiSelect [options]="(schools$| async)" display="chip" [(ngModel)]="filtration.schoolIds"   optionValue="id"  placeholder="{{'shared.chooseSchool'|translate }}" optionLabel="{{lang=='ar'? 'name.ar' : 'name.en'}}"></p-multiSelect>
                        </div>

                        <div class="col-4">
                            <label class="label" for="curriculum">{{'dashboard.SchoolYear.Subject'|translate}}  </label>

                            <p-multiSelect [options]="(subjects$| async)" display="chip" [(ngModel)]="filtration.subjectIds"   optionValue="id" placeholder="{{'dashboard.SchoolYear.Select Subject'|translate}}" optionLabel="{{lang=='ar'? 'name.ar' : 'name.en'}}"></p-multiSelect>

                        </div>

                    </div>
                </app-table-caption>

            </ng-template>


            <ng-template pTemplate="header" let-columns="columns">
                <tr>
                    <ng-container *ngFor="let column of tableColumns" >
                        <th [pSortableColumn]="column.name.ar" *ngIf="column.isSelected == true">
                            <!-- studentsReportsArray -->
                            <p-sortIcon field="{{column.name }}"></p-sortIcon>{{column.name }}
                        </th>
                    </ng-container>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-teacher>
                <tr>
                    <ng-container>
                        <td>
                            {{teacher?.schoolName| currentLang}}
                        </td>
                        <td>
                            {{teacher?.subjectName | currentLang}}
                        </td>
                        <td>
                            {{teacher?.teachersCount}}
                        </td>
                        <td *ngIf="teacher?.teacherName">
                            {{teacher?.teacherName | currentLang}}
                        </td>
                        <td *ngIf="!teacher?.teacherName">
                            {{'shared.notFound' | translate}}
                        </td>
                        <td  *ngIf="teacher?.teacherField">
                            {{teacher?.teacherField | currentLang}}
                        </td>
                        <td  *ngIf="!teacher?.teacherField">
                            {{'shared.notFound' | translate}}
                        </td>

                        <td>
                            {{teacher?.sbjectWeeklyHours}}
                        </td>

                    </ng-container>

                </tr>
            </ng-template>

            <ng-template pTemplate="emptymessage" let-columns>
                <tr>
                    <td [attr.colspan]="20">
                        <ng-container *ngIf="!teachersReport.total &&  !teachersReport.loading">
                            <app-informative-block subTitle="{{'emptyList.noDataMatch' |translate}}"
                                src="assets/images/empty-list/empty-list.svg"></app-informative-block>
                        </ng-container>

                        <app-loader></app-loader>
                    </td>
                </tr>
            </ng-template>
        </p-table>

        <div class="" *ngIf="teachersReport.total  > paginationState.rows">
            <app-pagination [currentPage]="filtration.Page" [totalItems]="teachersReport.total"
                (paginationChanged)="paginationChanged($event)"></app-pagination>
        </div>
    </div>

    <ng-container *ngIf="!teachersReport.totalAllData && !teachersReport.loading">
        <app-informative-block title="{{'emptyList.teachers' |translate}}"
            src="assets/images/empty-list/empty-list.svg"></app-informative-block>
    </ng-container>
</div>


<div *ngIf="!isSkeletonVisible" class="bg-white p-5 radius-15 border-dark">



    <div class="row gap-6 radius-15 border-dark p-5 mb-5 bg-white" *ngIf="currentUserScope!=userScope.Guardian">
        <ng-container *ngIf="guardianData">
            <div class="col-4 d-flex align-items-center gap-5 mb-5">
                <p class="color-gray-300 fs-4">{{'dashboard.parents.parentName' | translate}}</p>
                <h4 class="color-primary">{{guardianData.name | currentLang}}</h4>
            </div>
            <div class="col-4 d-flex align-items-center gap-5 mb-5">
                <p class="color-gray-300 fs-4">{{'dashboard.parents.parentNickname' | translate}}</p>
                <h4 class="color-primary">{{guardianData.surname| currentLang}}</h4>
            </div>
            <div class="col-4 d-flex align-items-center gap-5 mb-5" *ngIf="guardianData.nationalityName">
                <p class="color-gray-300 fs-4">{{'shared.nationality' | translate}}</p>
                <h4 class="color-primary" >{{guardianData.nationalityName |currentLang}}</h4>
            </div>
            <div class="col-4 d-flex align-items-center gap-5 mb-5">
                <p class="color-gray-300 fs-4">{{'shared.phoneNumber' | translate}}</p>
                <h4 class="color-primary">{{ guardianData.mobile}}</h4>
            </div>

            <div class="col-4 d-flex align-items-center gap-5 mb-5">
                <p class="color-gray-300 fs-4">{{'shared.email' | translate}}</p>
                <h4 class="color-primary">{{guardianData.email}}</h4>

            </div>

            <div class="col-4 d-flex align-items-center gap-5 mb-5">
                <p class="color-gray-300 fs-4">{{'shared.birthDay' | translate}}</p>
                <h4 class="color-primary">{{guardianData.birthDate |LocalizeDate}}</h4>
            </div>
        </ng-container>

    </div>

    <hr class="my-5">

    <div class="">
        <div class="d-flex align-items-center gap-3">
            <img class="mysons" src="assets/images/home/schools-students/parents.svg" alt="">
            <h3 class="heading heading--secondary color-primary">{{'dashboard.parentHome.Registered children' | translate}}</h3>
        </div>
        <!-- <h3 class=" color-primary fw-bold">{{'dashboard.parentHome.Registered children' | translate}}</h3> -->
        <div class="cards mt-5">
            <div *ngIf="skeletonShown " class="row gx-5">
                <div class="col-md-4" *ngFor="let item of [1,2,3]" >
                    <app-skeleton size="38rem" [style]="{'margin-bottom': '5rem','margin-left': '3rem'}"></app-skeleton>
                </div>
            </div>

            <!-- Registered Child -->
            <div class="row g-5" *ngIf="!skeletonShown ">
                <div class="col-sm-6 col-md-4 col-xxl-3" *ngFor="let student of students">
                    <div role="button" [routerLink]="['../', 'child',student?.studentGuid||student?.guid ]" [queryParams]="{ registered: 'true' }" class="box-shadow radius-15 p-0 h-100">

                        <div class="profile d-flex align-items-center p-4">
                            <div class="profile__avatar">
                                <img [src]="student?.imagePath" onerror="this.src='assets/images/shared/image.svg'" alt="Avatar">
                            </div>

                            <div class="profile__info">
                                <div class="profile__name ">
                                    <h4 class="heading heading--tertiary">{{student.name | currentLang}}</h4>

                                </div>
                                <div class="profile__details mt-0">
                                    <div class="fs-4">
                                        <img src="assets/images/shared/child.svg" alt="">
                                        <span class="color-gray-300">{{student.age}} {{'dashboard.issue of certificate.year' | translate}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class=" border-top-gray p-4 ">
                            <div class="grid-container gap-4 pt-2 mb-4">

                              <p class="color-gray-300 fs-4">{{ 'dashboard.schools.studentId'|translate }}</p>
                              <span class="color-gray-800 mb-2">{{student.id }}</span>

                                <p class="color-gray-300 fs-4">{{ 'shared.school'|translate }}</p>
                                <span class="color-gray-800 mb-2">{{student.school | currentLang}}</span>

                                <p class="color-gray-300 fs-4">{{ 'dashboard.parents.academicLevel'|translate }}</p>
                                <span class="color-gray-800 mb-2">{{student.grade | currentLang}}</span>

                                <p class="color-gray-300 fs-4">{{ 'the division'|translate }}</p>
                                <span class="color-gray-800 mb-2">{{student.division | currentLang}}</span>

                                <p class="color-gray-300 fs-4">{{ 'dashboard.parents.relativeRelation'|translate }}</p>
                                <span class="color-gray-800 mb-2">{{student.relativeRelation | currentLang}}</span>
                            </div>

                            <!-- <div class="text-center p-3 radius-15 bg-gray-50 color-gray-300">{{'shared.registerd' | translate}}</div> -->
                        </div>

                    </div>
                </div>
                <app-informative-block *ngIf="!students?.length" title="{{'emptyList.noRegisteredSonsForThisGuardian' |translate}}"></app-informative-block>
            </div>
        </div>
    </div>



    <!-- Withdrawn Children -->
    <div *ngIf="currentUserScope!=userScope.Employee && studentsWithdrawal?.length">
        <hr class="my-6">
        <div class="d-flex align-items-center gap-3">
            <img class="mysons" src="assets/images/home/schools-students/parents.svg" alt="">
            <h3 class="heading heading--secondary color-red-500">{{'dashboard.parentHome.Withdrawn children' | translate}}</h3>
        </div>
        <!-- <h2 class="color-primary fw-bold">{{'dashboard.parentHome.Unregistered children' | translate}}</h2> -->
        <div class="cards mt-5">
            <div *ngIf="skeletonShown" class="row gx-5">
                <div class="col-md-4" *ngFor="let item of [1,2,3]">
                    <app-skeleton size="38rem" [style]="{'margin-bottom': '5rem','margin-left': '3rem'}"></app-skeleton>
                </div>
            </div>
            <div class="row g-5" *ngIf="!skeletonShown">
                <div class="col-sm-6 col-md-4 col-xxl-3" *ngFor="let child of studentsWithdrawal">
                    <div role="button" [routerLink]="['../', 'child',child?.studentGuid]" [queryParams]="{ registered: 'true' }" class="box-shadow radius-15 p-0 h-100">

                        <div class="profile d-flex align-items-center p-4">
                            <div class="profile__avatar">
                                <img [src]="child.imagePath" onerror="this.src='assets/images/shared/image.svg'" alt="Avatar">
                            </div>

                            <div class="profile__info">
                                <div class="profile__name ">
                                    <h4 class="heading heading--tertiary">{{child.name | currentLang}}</h4>

                                </div>
                                <div class="profile__details mt-0">
                                    <div class="fs-4">
                                        <img src="assets/images/shared/child.svg" alt="">
                                        <span class="color-gray-300">{{child.age}} {{'dashboard.issue of certificate.year' | translate}}</span>
                                    </div>
                                </div>
                            </div>

                        </div>


                        <div class=" border-top-gray p-4 ">
                            <div class="gg gap-sm pt-2 mb-4">

                                <p class="color-gray-300 fs-4">{{ 'dashboard.parents.relativeRelation'|translate }}</p>
                                <span class="color-gray-800 mb-2">{{child.relativeRelation | currentLang}}</span>
                            </div>

                            <div class="card__actions pt-3" *permit="claimsEnum.GS_RegisterChild">
                                <button class="btn btn--full btn-danger "  [routerLink]="['../','child', child?.studentGuid, 'register']" [queryParams]="{status: registrationStatus.Withdrawal}" StopProp>
                                    <span stopProp  class="ms-3 ">{{'dashboard.parents.reRegistration'|translate }}</span>
                                </button>
                            </div>
                        </div>

                    </div>
                </div>

                <app-informative-block *ngIf="!studentsWithdrawal.length"  subTitle="{{'emptyList.noUnregisteredSonsForThisGuardian' |translate}}"></app-informative-block>
            </div>
        </div>
    </div>

    <hr class="my-6">

        <!-- UnRegistered Child -->
    <div *ngIf="currentUserScope!=userScope.Employee">
        <div class="d-flex align-items-center gap-3">
            <img class="mysons" src="assets/images/home/schools-students/parents.svg" alt="">
            <h3 class="heading heading--secondary color-primary">{{'dashboard.parentHome.Unregistered children' | translate}}</h3>
        </div>
        <!-- <h2 class="color-primary fw-bold">{{'dashboard.parentHome.Unregistered children' | translate}}</h2> -->
        <div class="cards mt-5">
            <div *ngIf="skeletonShown" class="row gx-5">
                <div class="col-md-4" *ngFor="let item of [1,2,3]">
                    <app-skeleton size="38rem" [style]="{'margin-bottom': '5rem','margin-left': '3rem'}"></app-skeleton>
                </div>
            </div>
            <div class="row g-5" *ngIf="!skeletonShown">
                <div class="col-sm-6 col-md-4 col-xxl-3" *ngFor="let child of chiledren">
                    <div role="button" [routerLink]="['../', 'child', child.id]" [queryParams]="{ registered: 'false' }" class="box-shadow radius-15 p-0 h-100">

                        <div class="profile d-flex align-items-center p-4">
                            <div class="profile__avatar">
                                <img [src]="child.imagePath" onerror="this.src='assets/images/shared/image.svg'" alt="Avatar">
                            </div>

                            <div class="profile__info">
                                <div class="profile__name ">
                                    <h4 class="heading heading--tertiary">{{child.name | currentLang}}</h4>

                                </div>
                                <div class="profile__details mt-0">
                                    <div class="fs-4">
                                        <img src="assets/images/shared/child.svg" alt="">
                                        <span class="color-gray-300">{{child.age}} {{'dashboard.issue of certificate.year' | translate}}</span>
                                    </div>
                                </div>
                            </div>

                        </div>


                        <div class=" border-top-gray p-4 ">
                            <div class="gg gap-sm pt-2 mb-4">

                                <p class="color-gray-300 fs-4">{{ 'dashboard.parents.relativeRelation'|translate }}</p>
                                <span class="color-gray-800 mb-2">{{child.relativeRelation | currentLang}}</span>
                            </div>

                            <div class="card__actions pt-3 " StopProp *permit="claimsEnum.GS_RegisterChild">
                                <button  class="btn btn--full btn-primary " (click)="displayUnregisterChild(child.id)" StopProp>
                                    <span class="ms-3">{{ 'dashboard.parents.registerInSchool'|translate }}</span>
                                </button>
                            </div>
                        </div>

                    </div>
                </div>

                <app-informative-block *ngIf="!chiledren.length"  subTitle="{{'emptyList.noUnregisteredSonsForThisGuardian' |translate}}"></app-informative-block>
            </div>
        </div>
        <div class="py-6"></div>
    </div>




    <hr class="my-5">

    <div class="" *ngIf="currentUserScope!=userScope.Guardian || currentUserScope!=userScope.SPEA">
        <div class="d-flex align-items-center gap-3">
            <img class="mysons" src="assets/images/home/schools-students/parents.svg" alt="">
            <h3 class="heading heading--secondary color-primary">{{'dashboard.parentHome.graduatedChildren' | translate}}</h3>
        </div>
        <!-- <h3 class=" color-primary fw-bold">{{'dashboard.parentHome.Registered children' | translate}}</h3> -->
        <div class="cards mt-5">
            <div *ngIf="skeletonShown " class="row gx-5">
                <div class="col-md-4" *ngFor="let item of [1,2,3]" >
                    <app-skeleton size="38rem" [style]="{'margin-bottom': '5rem','margin-left': '3rem'}"></app-skeleton>
                </div>
            </div>

            <!-- Graduated Child -->
            <div class="row g-5" *ngIf="!skeletonShown ">
                <div class="col-sm-6 col-md-4 col-xxl-3" *ngFor="let student of finalGraduatedStudents">
                    <div role="button" [routerLink]="['../', 'child',student?.studentGuid]" [queryParams]="{ registered: 'true' }" class="box-shadow radius-15 p-0 h-100">

                        <div class="profile d-flex align-items-center p-4">
                            <div class="profile__avatar">
                                <img [src]="student?.imagePath" onerror="this.src='assets/images/shared/image.svg'" alt="Avatar">
                            </div>

                            <div class="profile__info">
                                <div class="profile__name ">
                                    <h4 class="heading heading--tertiary">{{student.name | currentLang}}</h4>

                                </div>
                                <div class="profile__details mt-0">
                                    <div class="fs-4">
                                        <img src="assets/images/shared/child.svg" alt="">
                                        <span class="color-gray-300">{{student.age}} {{'dashboard.issue of certificate.year' | translate}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class=" border-top-gray p-4 ">
                            <div class="grid-container gap-4 pt-2 mb-4">

                              <p class="color-gray-300 fs-4">{{ 'dashboard.schools.studentId'|translate }}</p>
                              <span class="color-gray-800 mb-2">{{student.id }}</span>

                                <p class="color-gray-300 fs-4">{{ 'shared.school'|translate }}</p>
                                <span class="color-gray-800 mb-2">{{student.school | currentLang}}</span>

                                <p class="color-gray-300 fs-4">{{ 'dashboard.parents.academicLevel'|translate }}</p>
                                <span class="color-gray-800 mb-2">{{student.grade | currentLang}}</span>

                                <p class="color-gray-300 fs-4">{{ 'the division'|translate }}</p>
                                <span class="color-gray-800 mb-2">{{student.division | currentLang}}</span>

                                <p class="color-gray-300 fs-4">{{ 'dashboard.parents.relativeRelation'|translate }}</p>
                                <span class="color-gray-800 mb-2">{{student.relativeRelation | currentLang}}</span>
                            </div>

                            <!-- <div class="text-center p-3 radius-15 bg-gray-50 color-gray-300">{{'shared.registerd' | translate}}</div> -->
                        </div>

                    </div>
                </div>
                <app-informative-block *ngIf="!finalGraduatedStudents?.length" subTitle="{{'emptyList.noGraduatedSonsForThisGuardian' |translate}}"></app-informative-block>
            </div>
        </div>
    </div>

</div>


 <div class="d-flex ms-5 mt-6" *ngIf="isSkeletonVisible">
        <app-skeleton size="38rem" [style]="{'margin-bottom': '5rem','margin-left': '3rem'}" count="2"></app-skeleton>
        <app-skeleton size="38rem" [style]="{'margin-bottom': '5rem','margin-left': '3rem'}" count="2"></app-skeleton>
        <app-skeleton size="38rem" [style]="{'margin-bottom': '5rem','margin-left': '3rem'}" count="2"></app-skeleton>
 </div>




<div class="schools">
    <div class="ui-g">
        <div class="row">
            <div class="col-md-4">

                <p-card id="card-chart">
                    <div class="row">
                        <div class="col-md-6" id="DoughnutChart">
                            <p-chart type="doughnut" [data]="seconduserAppData" height="170"></p-chart>
                            <div class="mt-4">
                                <h2 class="chart-title">عدد المدارس الكلية</h2>
                                <h2 class="number-chart">100</h2>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <ul class="chart-Info">
                                <li class="Active mb-4">

                                    <span class="color-primary-700 mb-2  percentage">25%</span>
                                    <span class="color-gray-300 fs-4">المنهج الاسترالي</span>

                                </li>
                                <li class="second">
                                    <span class="color-primary-700 mb-2 percentage">25%</span>
                                    <span class="color-gray-300 fs-4"> المنهج الأميركي</span>
                                </li>
                                <li class="notActive">
                                    <span class="color-primary-700 mb-2 percentage">25%</span>
                                    <span class="color-gray-300 fs-4">المنهج البريطاني</span>
                                </li>
                                <li class="four">
                                    <span class="color-primary-700 mb-2  percentage">25%</span>
                                    <span class="color-gray-300 fs-4"> المنهج الآسيوي</span>
                                </li>
                            </ul>
                        </div>
                    </div>


                </p-card>

            </div>
            <div class="col-md-5">
                <p-card>
                    <div class="row">
                        <div class="col-md-8">
                            <p-chart type="bar" id="card-chart-bar" [data]="userUsageHoursData" [options]="options" height="228" width="100"></p-chart>
                        </div>
                        <div class="col-md-4 mt-5 Bar-char-Info">
                            <h2 class="title">عدد المدارس</h2>
                            <ul class="chart-Info-bar">
                                <li class="Active mb-2">
                                    <span class="color-primary-700 mb-2 percentage">30</span>
                                    <span class="color-gray-300 fs-4">المنطقة الوسطى</span>
                                </li>
                                <li class="second">
                                    <span class="color-primary-700 mb-2 percentage">28</span>
                                    <span class="color-gray-300 fs-4">المنطقة الشرقية</span>
                                </li>
                                <li class="notActive">
                                    <span class="color-primary-700 mb-2 percentage">19</span>
                                    <span class="color-gray-300 fs-4"> المنطقة الشارقة</span>
                                </li>

                            </ul>
                        </div>
                        <!-- <p-chart type="bar" [data]="userUsageHoursData" [options]="options" style="overflow:hidden;"></p-chart> -->
                    </div>
                </p-card>
            </div>
            <div class="col-md-3">
                <p-card id="card-chart">
                    <div class="row">
                        <div class="col-md-6" id="DoughnutChart" style="margin-top: 5vh;">
                            <p-chart type="doughnut" [data]="userAppData" [style]="{'width': '20%'}"></p-chart>
                            <div class="mt-4">
                                <h2 class="chart-title">عدد المدارس الكلية</h2>
                                <h2 class="number-chart">100</h2>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <ul class="chart-Info">
                                <li class="notActive mb-4">
                                    <span class="color-gray-300 fs-4">غير مفعله</span>
                                </li>
                                <li class="Active">
                                    <span class="color-gray-300 fs-4">مفعله </span>
                                </li>
                            </ul>
                        </div>
                    </div>


                </p-card>
            </div>
        </div>

    </div>

    <div class="prim-table mt-4" >
        <p-table 
        #dt 
        [value]="schools.list" 
        [loading]="false" 
        (onSort)="onSort($event)">
            <!-- Table Caption -->
            <ng-template pTemplate="caption">
                <app-table-caption 
                (onExport)="onExport($event)" 
                (onFilter)="getSchools()" 
                (onSearch)="filtration.KeyWord = $event; getSchools()"
                (onClear)="clearFilter()">

                    <div class="row gx-5 form-set">
                        <div class="col">
                            <label class="label" for="status">{{'shared.status'|translate }} </label>
                            <p-dropdown [options]="schoolStatus" [(ngModel)]="filtration.Status" inputId="status" placeholder="{{'shared.status'|translate }}"></p-dropdown>
                        </div>
                        <div class="col">
                            <label class="label" for="city">{{'shared.city'|translate }} </label>
                            <p-dropdown [options]="cities" [(ngModel)]="filtration.City" inputId="city" placeholder="{{'shared.chooseCity'|translate }}"></p-dropdown>
                        </div>
                    </div>
                    <div class="row gx-5 form-set">
                        <div class="col">
                            <label class="label" for="region">{{'shared.state'|translate }}  </label>
                            <p-dropdown [options]="['yes', 'now']" [(ngModel)]="filtration.region" inputId="description" optionLabel="region" placeholder="{{'shared.chooseState'|translate }}"></p-dropdown>
                        </div>
                        <div class="col">
                            <label class="label" for="curriculum">{{'shared.curriculum'|translate }}  </label>
                            <p-dropdown [options]="(curriculums$ | async)?.data" [(ngModel)]="filtration.curricuulumId" optionValue="id" inputId="curriculum" optionLabel="arabicName" placeholder="{{'shared.chooseCurriculum'|translate }}"></p-dropdown>
                        </div>
                    </div>
                </app-table-caption>

            </ng-template>

            <ng-template pTemplate="header" let-columns="columns">
                <tr>
                    <!-- <th *ngFor="let col of cols">
                      {{col.header}}
                  </th>
                  <th pSortableColumn="actions"></th> -->
                    <th pSortableColumn="name">{{'dashboard.schools.schoolName'|translate}}
                        <p-sortIcon field="name"></p-sortIcon>
                    </th>
                    <th pSortableColumn="city">{{'shared.city'|translate}}
                        <p-sortIcon field="city"></p-sortIcon>
                    </th>
                    <th pSortableColumn="regionName">{{'shared.state'|translate}}
                        <p-sortIcon field="regionName"></p-sortIcon>
                    </th>
                    <th pSortableColumn="curriculumName">{{'shared.curriculum'|translate}}
                        <p-sortIcon field="curriculumName"></p-sortIcon>
                    </th>
                    <th pSortableColumn="studentCount">{{'dashboard.schools.studentsNumber'|translate}}
                        <p-sortIcon field="studentCount"></p-sortIcon>
                    </th>
                    <th pSortableColumn="establishmentDate">{{'dashboard.schools.schoolStablishmentDate'|translate}}</th>
                    <th pSortableColumn="actions">{{'dashboard.schools.schoolStatus'|translate}}</th>
                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-school>

                <!-- <ng-container *ngIf="false then thenBlock else emptyList"></ng-container> -->

                <tr routerLink="school/2">
                    <td>{{school.name.ar}}</td>
                    <td>{{school.city}}</td>
                    <td>{{school.regionName.ar}}</td>
                    <td>{{school.curriculumName.ar}}</td>
                    <td>{{school.studentCount}}</td>
                    <td>{{school.establishmentDate | date}}</td>
                    <td>
                        
                        <div class="alerting " [ngClass]="{'success':school.status == StatusEnum.Active, 'danger': school.status == StatusEnum.Inactive}">
                            {{
                                school.status == StatusEnum.Active ? ('shared.allStatus.' +StatusEnum.Active| translate)  : ('shared.allStatus.' +StatusEnum.Inactive| translate)
                            }}
                        </div>
                    </td>
                </tr>
            </ng-template>

            <!-- <ng-template pTemplate="footer" let-columns="columns">
              <tr  class="p-rowgroup-footer">
                  <td [attr.colspan]="7" style="width: 100%">
                      <div *ngIf="schoolClasses.length > 0">
                          <app-pagination [totalItems]="schoolClasses.length" (paginationChanged)="paginationChanged($event)"></app-pagination>
                      </div>
                  </td>
              </tr>
          </ng-template> -->

            <ng-template pTemplate="emptymessage" let-columns>
                <tr>
                    <td [attr.colspan]="20">
                        <app-informative-block title="{{'emptyList.schools' |translate}}" src="assets/images/empty-list/empty-list.svg"></app-informative-block>
                    </td>
                </tr>
            </ng-template>

        </p-table>
        <div class="">
            <app-pagination [totalItems]="schools.total" (paginationChanged)="paginationChanged($event)"></app-pagination>
        </div>

    </div>

    <ng-container *ngIf="!schools.total">
        <app-informative-block title="{{'emptyList.schools' |translate}}" src="assets/images/empty-list/empty-list.svg"></app-informative-block>
    </ng-container>
    
</div>


<ng-template #totalSchoolCount>
    <div *ngIf="model.chartData" class="mt-4">
        <h2 class="chart-title">عدد المدارس الكلية</h2>
        <h2 class="number-chart">{{model.chartData.totalSchoolCount}}</h2>
    </div>
</ng-template>
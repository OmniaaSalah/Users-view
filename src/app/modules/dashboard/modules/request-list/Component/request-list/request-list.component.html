<!-- emptymessage -->
<div class="schools">

    <div class="prim-table mt-4" *ngIf="requests.totalAllData || requests.loading">
        <div class="parents">
            <div class="prim-table mt-4">   
                <!-- [(rows)]="rows" [(first)]="first" -->
                <p-table #dt [value]="requests.list" [lazy]="true" (onSort)="sortMe($event)" >
                    <!-- Table Caption -->

                    <!-- <ng-template pTemplate="caption">
                        <app-table-caption [filterFormControls]="['status','city','state','course']"></app-table-caption>

                    </ng-template> -->

                    <ng-template pTemplate="caption">
                        <app-table-caption (onExport)="onExport($event)" (onFilter)="getRequests()" (onSearch)="filtration.KeyWord = $event; getRequests()" (onClear)="clearFilter()">
            
                            <div class="row gx-5 form-set">
                                <div class="col-6">
                                    <label class="label" for="evaluationType"> {{'dashboard.Requests.Status'|translate}} </label>
                                    <p-dropdown [options]="evaluationTypeList"  optionLabel="name.ar" optionValue="id" [(ngModel)]="filtration.evaluation" inputId="evaluationType"  placeholder="{{'dashboard.Subjects.select evaluation type'|translate}}"></p-dropdown>
                                </div>
                                <div class="col-6">
                                    <label class="label" for="evaluationType"> {{'dashboard.Requests.requestType'|translate}} </label>
                                    <p-dropdown [options]="evaluationTypeList"  optionLabel="name.ar" optionValue="id" [(ngModel)]="filtration.evaluation" inputId="evaluationType"  placeholder="{{'dashboard.Subjects.select evaluation type'|translate}}"></p-dropdown>
                                </div>
                            </div>
            
                        </app-table-caption>
            
                    </ng-template>





                    <ng-template pTemplate="header" let-columns="columns">
                        <tr>
                            <th pSortableColumn="requestNumber">
                                <p-sortIcon field="requestNumber"></p-sortIcon>{{'dashboard.Requests.requestNumber'|translate}}</th>
                            <th pSortableColumn="requestType">
                                <p-sortIcon field="requestType"></p-sortIcon>{{'dashboard.Requests.requestType'|translate}}</th>
                            <th pSortableColumn="creatorName">
                                <p-sortIcon field="creatorName"></p-sortIcon>{{'dashboard.Subjects.Created by'|translate}}</th>
                            <th pSortableColumn="createdDate">
                                <p-sortIcon field="createdDate"></p-sortIcon>{{'shared.Created Date'|translate}}</th>
                            <th pSortableColumn="Status">
                                <p-sortIcon field="Status"></p-sortIcon>{{'dashboard.Requests.Status'|translate}}</th>
                                <th pSortableColumn="relationWith">
                                    <p-sortIcon field="Status"></p-sortIcon> {{'dashboard.myRequest.The request is associated with' | translate}} </th>
                        </tr>
                    </ng-template>


                    <ng-template pTemplate="body" let-request>
                        <tr (click)="routeToDetails(request.id)" class="clickable">
                            <!-- <td *ngFor="let col of cols | paginate:{ id: 'foo',itemsPerPage: 4 ,currentPage: p,totalItems: 8 }">
                      {{product[col.field]}}
                  </td> -->
                            <td>{{request.requestNumber}}</td>
                            <td>{{request.requestType | currentLang}}</td>
                            <td>{{request.createdBy | currentLang}}</td>
                            <td>{{request.date}}</td>
                            <td><div class="alerting success">{{request.reuestStatus | currentLang}}</div></td>
                            <td>{{request.relatedWith | currentLang}}</td>
                        </tr>
                    </ng-template>


                    <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td [attr.colspan]="20">
                                <ng-container *ngIf="requests.totalAllData && requests.list.length == 0 &&  !requests.loading">
                                    <app-informative-block title="{{'emptyList.noDataMatch' |translate}}" src="assets/images/empty-list/empty-list.svg"></app-informative-block>
                                </ng-container>

                                <app-loader></app-loader>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
        <div class="">
            <app-pagination [totalItems]="requests.list.length" (paginationChanged)="paginationChanged($event)"></app-pagination>
        </div>



        <ng-container *ngIf="!requests.totalAllData && !requests.loading">
            <app-informative-block title="{{'emptyList.schools' |translate}}" src="assets/images/empty-list/empty-list.svg"></app-informative-block>
        </ng-container>

    </div>
</div>
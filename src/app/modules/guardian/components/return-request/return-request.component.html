
<div class="bg-white position-relative p-5" >


  <div class="submitBtn d-flex justify-content-end align-items-center gap-4" *ngIf="registerReqForm">

      <!-- اعاده ارسال طلب التسجيل بعد ارجاعه من قبل الهيئه  -->
      <ng-container *ngFor="let action of actions">
        <!-- && childRegistrationStatus!=registrtionStatusEnum.Withdrawal -->
          <button class="btn btn-primary "
          [disabled]="!registerReqForm.valid || onSubmit || !isAllAttachmentsUploaded"
          *ngIf="scope ==ScopeEnum.Guardian && instanceId"  (click)="updateRegistrationReq(action.id)">

              <div class="spinner-border text-light" role="status" *ngIf="onSubmit"></div>
              <span>{{action.title | currentLang}}</span>
              <!-- <span>{{'dashboard.Requests.resendRegstrationRequest' | translate}}</span> -->

          </button>
      </ng-container>


      <span *ngIf="scope ==ScopeEnum.SPEA" [routerLink]="['/schools-and-students/all-parents/parent', parentId,'all-children']" role="button" class="color-red-500 text-decoration-underline">{{'shared.cancel' |translate}}</span>
      <span *ngIf="scope !=ScopeEnum.SPEA" [routerLink]="['/']" role="button" class="color-red-500 text-decoration-underline">{{'shared.cancel' |translate}}</span>

  </div>

  <!-- <div class="workflow my-5">
      <ul class="workflow__list">
          <li class="workflow__item">

          </li>
          <li class="workflow__item">

          </li>
      </ul>
  </div> -->

  <app-workflow  *ngIf="scope !=ScopeEnum.SPEA" [steps]="[{ar:'موافقة المدرسة', en:'School Approval'},{ar:'إعتماد الهيئة', en:'Spea Approval'}]"></app-workflow>

  <ng-container *ngIf="!childData && childData!=null">
      <div class="row mb-4">
          <div class="col-4 d-flex gap-4 align-items-center">
              <app-skeleton size="7rem"></app-skeleton>
              <app-skeleton width="20rem"  count="2" height="2rem"></app-skeleton>
          </div>
      </div>
  </ng-container>

  <div class="radius-15 border p-5 mb-5 bg-white custom-form" *ngIf="childData!=null">
      <div class="d-flex align-items-center justify-content-between bg-white">
          <div class="profile d-flex align-items-center">
              <div class="profile__avatar">
                  <img [src]="childData?.imagePath" onerror="this.src='assets/images/shared/image.svg'" alt="Avatar">
              </div>
              <div class="profile__info">
                  <div class="profile__name ">
                      <h4 class="heading heading--tertiary">{{childData?.name | currentLang}}</h4>

                  </div>
                  <div class="profile__details">
                      <div class="fs-4">
                          <img src="assets/images/shared/child.svg" alt="">
                          <span class="color-gray-300">{{childData?.age}} {{'dashboard.issue of certificate.year' | translate}}</span>
                      </div>
                      <div >
                          <img  src="assets/images/shared/fingure-red.svg" alt="">
                          <span class="color-gray-300 fs-4">{{'shared.notRegistered'|translate}}</span>
                      </div>

                  </div>
              </div>
          </div>


      </div>
  </div>





  <ng-container *ngIf="scope ==ScopeEnum.Guardian && childData?.status!=registrtionStatusEnum.Withdrawal">
      <div class="mb-6 p-5 bg-color-30 radius-15 border-dark custom-form" *ngIf="registerReqForm">
        <form [formGroup]="registerReqForm">
              <div class="row g-5 form-set">
                  <div class="col-md-4">
                      <label class="label">{{'dashboard.request-list.The children of the martyrs' | translate}} <span class="star">*</span></label>
                      <p-dropdown [options]="booleanOptions" formControlName="isChildOfAMartyr" optionValue="value"  optionLabel="name" placeholder="{{'shared.yesOrNo' |translate}}"></p-dropdown>
                  </div>
                  <div class="col-md-4">
                      <label class="label">{{'dashboard.request-list.The student is a person of determination' | translate}} <span class="star">*</span></label>
                      <p-dropdown [options]="booleanOptions" formControlName="isSpecialAbilities" (ngModelChange)="resetSpecialClass($event)" optionValue="value" optionLabel="name" placeholder="{{'shared.yesOrNo' |translate}}"></p-dropdown>
                  </div>

                  <div class="col-md-4" *ngIf="registerReqForm?.value.isSpecialAbilities">
                      <label class="label">{{'dashboard.request-list.Special/merge classes' | translate}}</label>
                      <p-dropdown [options]="disabilitiesOptions"  [showClear]="true" [(ngModel)]="classType"  (ngModelChange)="onClassTypeChange($event)"  [ngModelOptions]="{standalone: true}" optionValue="value"  optionLabel="name" placeholder="{{'dashboard.schools.SelectClassType' |translate}}"></p-dropdown>
                  </div>

              </div>

              <div class="row gx-5 custom-form">
                  <!-- <div class="col-md-4">
                      <div class="form-set">
                          <label class="label" for="description">{{'dashboard.request-list.special breeding' | translate}} <span class="star">*</span></label>
                          <p-dropdown formControlName="isSpecialEducation" #specialEducation [options]="booleanOptions" optionValue="value" optionLabel="name" placeholder="{{'shared.yesOrNo' |translate}}"></p-dropdown>
                      </div>
                  </div> -->

                  <div class="col-md-4" *ngIf="classType=='SpecialClass'">
                      <div class="form-set">
                          <label class="label" for="description">{{'dashboard.request-list.type of special education' | translate}}</label>
                          <p-dropdown formControlName="specialEducationId"
                          [options]="educationType$|async" optionValue="id"
                          optionLabel="{{lang=='ar'?'name.ar' : 'name.en'}}"
                          placeholder="{{'dashboard.parents.specialEducationtype' |translate}}"
                          [required]="classType=='SpecialClass'"></p-dropdown>
                      </div>
                  </div>
              </div>
          </form>

      </div>
  </ng-container>



  <!-- Available Schools ------------------------>

  <ng-container  *ngIf="instanceId">
    <div class="  radius-15 border-dark p-5 mb-6">
      <div class="row">
        <div class="col-md-3 d-flex align-items-center gap-5">
          <p class="color-gray-300">{{'shared.school' | translate}}</p>
          <h4 class="color-primary">{{(returnedReqData?.school?.name | currentLang) ||'لم يحدد'}}</h4>
        </div>
        <div class="col-md-3 d-flex align-items-center gap-5">
          <p class="color-gray-300">{{'shared.grade' | translate}}</p>
          <h4 class="color-primary">{{(returnedReqData?.grade?.name | currentLang) ||'لم يحدد'}}</h4>
        </div>
      </div>
  </div>
  </ng-container>
  <!-- Available Schools ------------------------>




  <!-- Required Files -->
  <!-- && childRegistrationStatus!=registrtionStatusEnum.Withdrawal -->
  <div class="row gx-6 my-6 border-dark radius-15" *ngIf="requiredFiles && requiredFiles?.files?.length">
      <h3 class="heading heading--tertiary">{{'dashboard.request-list.required attachments' | translate}} <span class="star">*</span></h3>
      <div class="col-md-4" *ngFor="let file of requiredFiles.files;let i = index">
          <div class="">
              <app-file-upload
              [files]="file?.uploadedFiles"
              [isMandatory]="file?.isMandatory"
              view="full"
              (onFileUpload)="onFileUpload($event,file.name,i)"
              (onFileDelete)="onFileDelete($event.files,$event.index, i)" title="{{file.name | currentLang}}"
              ></app-file-upload>
          </div>
      </div>
  </div>


</div>

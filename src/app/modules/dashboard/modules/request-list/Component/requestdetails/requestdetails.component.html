


 <div class="submit-btn d-flex justify-content-end" *ngIf="requestDetails?.requestType==requetsaEnum.RegestrationApplicationRequest">
    <button class=" btn btn-primary btn--sm px-5" *ngIf="requestDetails.requestStatus==statusEnum.Rejected">
        <!-- <div class="spinner-border text-light" role="status" *ngIf="loading"></div> -->
        <span>{{'dashboard.Requests.resendRegstrationRequest' |translate}}</span>
    </button>
    <button class=" btn btn-primary btn--sm px-5" *ngIf="requestDetails.requestStatus==statusEnum.Pending || requestDetails.requestStatus==statusEnum.Accepted">
        <!-- <div class="spinner-border text-light" role="status" *ngIf="loading"></div> -->
        <span>{{'dashboard.Requests.withdrawalReq' |translate}}</span>
    </button>
</div>

<ng-container *ngIf="!requestDetails then loader"></ng-container>

<div class="radius-15 border p-5 mb-5 bg-white" *ngIf="requestDetails">

    <!-- NOTE:-------------- Request Main Data -->
    <div class="">
        <div class="row gap-6">
            <div class="col-4 d-flex align-items-center gap-5 mb-5">
                <p class="color-gray-300 fs-4">{{'dashboard.myRequest.Order ID' | translate}}</p>
                <h4 class="color-primary">{{requestDetails.requestNumber}}</h4>
            </div>
            <div class="col-4 d-flex align-items-center gap-5 mb-5">
                <p class="color-gray-300 fs-4">{{'dashboard.myRequest.request type' | translate}}</p>
                <h4 class="color-primary">{{'dashboard.Requests.' + requestDetails?.requestType |translate}}</h4>
            </div>
            <div class="col-4 d-flex align-items-center gap-5 mb-5">
                <p class="color-gray-300 fs-4">    {{'dashboard.myRequest.It was created by' | translate}}</p>
                <h4 class="color-primary">{{requestDetails.createdBy |currentLang}}</h4>
            </div>
            <div class="col-4 d-flex align-items-center gap-5 mb-5">
                <p class="color-gray-300 fs-4">{{'dashboard.myRequest.Order status' | translate}}</p>
                <h4 class="color-primary">{{'dashboard.Requests.'+requestDetails.requestStatus |translate}}</h4>
            </div>

            <div class="col-4 d-flex align-items-center gap-5 mb-5">
                <p class="color-gray-300 fs-4">{{'dashboard.myRequest.student status' | translate}}</p>
                <div [ngSwitch]="requestDetails.student.status">
                    <div class="color-primary" *ngSwitchCase="statusEnum.Registered">{{'shared.allStatus.Registered' | translate}}</div>
                    <div class="color-red-500-300" *ngSwitchCase="statusEnum.Unregestered">{{'shared.allStatus.Unregestered' | translate}}</div>
                    <div class="color-red-500-300" *ngSwitchCase="statusEnum.WithdrawnRejected">{{'shared.allStatus.WithdrawnRejected' | translate}}</div>
                    <div class="color-red-500" *ngSwitchCase="statusEnum.Deleted">{{'shared.allStatus.Deleted' | translate}}</div>
                    <div class="color-red-500" *ngSwitchCase="statusEnum.Withdrawn">{{'shared.allStatus.Withdrawn' | translate}}</div>
                    <div class="color-primary" *ngSwitchCase="statusEnum.Transferd">{{'shared.allStatus.Transferd' | translate}}</div>
                    <div class="color-primary" *ngSwitchDefault>{{'shared.registerd' | translate}}</div>
                </div>
            </div>

            <div class="col-4 d-flex align-items-center gap-5 mb-5">
                <p class="color-gray-300 fs-4">{{'dashboard.myRequest.Creation date and time' | translate}}</p>
                <h4 class="color-primary">{{requestDetails.createdDate |LocalizeDate}}</h4>
            </div>

        </div>

    </div>
</div>

<ng-container *ngIf="!timeline then commentLoader"></ng-container>

<div class="ms-4" *ngIf="timeline">
    <form  ngForm #f="ngForm">
        <!-- <label class="mb-2">{{'dashboard.myRequest.comment' | translate}} <span class="star">*</span></label>
        <div class="custom-form mb-4">
            <input type="text" [(ngModel)]="reqActionsForm.comments" name="comment" pInputText placeholder="{{'dashboard.myRequest.You can add a comment here' | translate}}"/>
            <p-dropdown [options]=" rejectReason$ | async" formControlName="rejectionReasonId" optionLabel="{{lang=='ar'? 'name.ar' : 'name.en'}}" optionValue="id" placeholder="{{'dashboard.myRequest.You can add a comment here' | translate}}"></p-dropdown>
        </div> -->


        <!-- <app-file-upload view="full" (onFileUpload)="addAttachmentToAction($event)"></app-file-upload> -->

        <!-- *ngIf="!requestDetails.requestStatus==statusEnum.Rejected || !requestDetails.requestStatus==statusEnum.Accepted || !requestDetails.requestStatus==statusEnum.Aprroved" -->
        <div class="d-flex justify-content-end mt-3 gap-3" >
            <!-- NOTE:----- incace the currnt user is Gurdian -->
            <!-- <button *ngIf="currentUserScope==userScopeEnum.Guardian"  (click)="rejectReasonModel = true" class="btn btn-outline-primary">{{'dashboard.myRequest.add a comment' | translate}}</button> -->

            <!-- NOTE:----- incace the currnt user is not  Gurdian -->
            <!-- currentUserScope!=userScopeEnum.Guardian  -->
            <ng-container *ngIf="timeline?.task?.options" >
                <button 
                [ngClass]="{'btn-primary':option.buttonTag=='primary', 'btn-outline-primary':option.buttonTag=='secondary', 'btn-outline-none':option.buttonTag=='outline-none'}"
                *ngFor="let option of timeline?.task?.options;let i=index" 
                (click)="onActionTaken(option)"
                class="btn">
                {{option.title|currentLang}}
                <div class="spinner-border text-light" role="status" *ngIf="option.isLoading"></div>
                </button>
            </ng-container>
        </div>
    </form>
</div>

<div class=" attach" >

</div>

<div class=" mt-5">
    <div class="tabView">

        <!-- Navigations Options -->
        <ul class="tabView__nav">
            <li class="tabView__nav__link" [class.active]="step==1" (click)="step=1"><span>{{'dashboard.myRequest.Application procedures' | translate}}</span></li>
            <li class="tabView__nav__link" [class.active]="step==2" (click)="step=2;"><span>{{'dashboard.myRequest.Order details' | translate}}</span></li>
        </ul>

        <div class="tabView__content">


            <ng-container *ngIf="step==1">
                <!-- <p-timeline [value]="events">
                    <ng-template pTemplate="content" let-event>
                        <small class="p-text-secondary">{{event.date}}</small>
                    </ng-template>
                    <ng-template pTemplate="opposite" let-event>
                        {{event.status}}
                    </ng-template>
                </p-timeline> -->
                <div class="">
                    <div class="row">
                        <div class="col-md-12">

                            <div id="content">
                                <ul class="timeline text-black">
                                    <ng-container *ngFor="let state of states">

                                        <ng-container *ngIf="state.status==statusEnum.Completed; then approvedTemp else  pendingTemp"></ng-container>
                                        
                                        <ng-template #pendingTemp>
                                            <li class="event" [class.active]="timeline.currentState.mappedStatusCode==state.state.mappedStatusCode" *ngFor="let task of state.tasks | slice :0:1">
                                                <ng-container *ngIf="!state.state.isFinal">
                                                    <p class="event__time mb-6">{{task.createdDate|LocalizeDate}}</p>
                                                    <div class="event__separator">
                                                        <div class="event__marker"></div>
                                                        <div class="event__connector"></div>
                                                    </div>
                                                    <div class="event__content">
                                                        <div class="profile__name ">
                                                            <h4 class="">{{state.state.title | currentLang}}</h4>
                                                            <!-- <span class="color-black-500 fs-4 ">{{task.action?.title | currentLang}} 
                                                                <span class="heading heading--tertiary">{{task.rejectThing | currentLang}}</span>
                                                            </span> -->
                                                            <!-- {{task.status.title | currentLang}} -->
                                                            <span class="color-red-500 me-auto"> قيد الانتظار </span>
                                                        </div>
                                                        <!-- <p class="fs-4 color-gray-800 w-75">{{task.content | currentLang}}</p> -->
                                                
                                                        <!-- <div class="icon--file m-4">
                                                            <img src="assets/images/shared/PDFSEC.svg" alt="">
                                                            <span class="text color-primary">{{task.attachment.name}}</span>
                                                        </div> -->
                                                    </div>
                                                </ng-container>
                                                
                                            </li>
                                        </ng-template>

                                        <ng-template #approvedTemp>
                                            <li class="event" *ngFor="let task of state.tasks">
                                                <p class="event__time" mb-6 >{{task.createdDate|LocalizeDate}}</p>
                                                <div class="event__separator">
                                                    <div class="event__marker"></div>
                                                    <div class="event__connector"></div>
                                                </div>
                                                <div class="event__content">
                                                    <div class="d-flex gap-4">
                                                        <span class="fw-bold ">{{task.assignedTo.fullName}}</span>
                                                        <span class="color-black-500 fs-4 ">{{task.action?.title | currentLang}} </span>
                                                        <span class="fw-bold">{{'dashboard.Requests.' + requestDetails?.requestType |translate}}</span>
                                                        <span class="color-skyBlue-500 me-auto">  {{task.action?.title | currentLang}}</span>
                                                    </div>
                                                    <p class="fs-4 color-gray-800 w-75">{{task.action?.comments}}</p>
                                            
                                                    <!-- <ng-container *ngTemplateOutlet="attachments; context: {$implicit: task.action.attachments}"></ng-container> -->
                                                    <div class="row mt-4 mb-6" *ngIf="task.action?.attachments">
                                                        <div  class="col-md-4" *ngFor="let item of task.action?.attachments">
                                                            <app-file [name]="item.name.ar" [url]="item.url"></app-file>
                                                        </div>
                                                    </div>
                                                    <!-- <div class="icon--file m-4">
                                                        <img src="assets/images/shared/PDFSEC.svg" alt="">
                                                        <span class="text color-primary">{{task.action.attachment}}</span>
                                                    </div> -->
                                                </div>
                                            </li>
                                        </ng-template>
                  
                                </ng-container>
                                </ul>
                            </div>
                        </div>
                        <!-- <div class="col-md-6 ">
                        </div> -->
                    </div>
                </div>
            </ng-container>
            <ng-container *ngIf="step==2 ">

                <ng-container *ngIf="isRequestRelatedToStudent(requestDetails?.requestType)">
                    <!-- NOTE:-------------- Student Main Data -->
                    <ng-container *ngTemplateOutlet="studentProfile; context: {$implicit: requestDetails.student}" ></ng-container>

                    <hr class="mb-5">
                </ng-container>
                
               
 

                <div class="fw-bold  mb-5">{{'dashboard.myRequest.Order details' | translate}}</div>

                <ng-container *ngIf="requestDetails?.requestType==requetsaEnum.AcademicSequenceCertificateRequest  || requestDetails?.requestType==requetsaEnum.BoardCertificateRequest ||requestDetails?.requestType==requetsaEnum.GradesCertificateRequest">
                    <ng-container *ngTemplateOutlet="certificatesRequests; context: {$implicit: requestDetails}" ></ng-container>
                </ng-container>
                

                <div [ngSwitch]="requestDetails?.requestType">
                    <!-- NOTE:--------------  طلب تعديل اجازه مرنه-->
                    <div *ngSwitchCase="requetsaEnum.FlexibleHolidayRequest">
                        <div class="row">
                            <div class="col-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'shared.cause' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.cause}}</h4>
                            </div>
                            <div class="col-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'shared.dateFrom' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.dateFrom | LocalizeDate}}</h4>
                            </div>
                            <div class="col-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'shared.dateTo' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.dateTo | LocalizeDate}}</h4>
                            </div>
                        </div>
                    </div>

                    <!-- NOTE:-------------- طلب اعاده مرحله دراسيه -->
                    <div *ngSwitchCase="requetsaEnum.StudentRegradingRequest">
                        <div class="col-4 d-flex align-items-center gap-5">
                            <p class="color-gray-300 fs-4">{{'shared.cause' | translate}}</p>
                            <h4 class="color-primary">{{requestDetails.cause}}</h4>
                        </div>
                    </div>

                    <!-- NOTE:-------------- طلب حذف الطالب-->
                    <div *ngSwitchCase="requetsaEnum.DeleteStudentRequest">
                        <div class="col-4 d-flex align-items-center gap-5">
                            <p class="color-gray-300 fs-4">{{'shared.cause' | translate}}</p>
                            <h4 class="color-primary">{{requestDetails.cause}}</h4>
                        </div>
                        <ng-container *ngTemplateOutlet="attachments; context: {$implicit: requestDetails.requestAttachments}" ></ng-container>
                    </div>

                    <!-- NOTE:-------------- طلب تسجيل الاين-->
                    <div *ngSwitchCase="requetsaEnum.RegestrationApplicationRequest">
                        <div class="row g-4">
                            <div class="col-md-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'shared.school' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.school.name|currentLang}}</h4>
                            </div>
                            <div class="col-md-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'shared.grade' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.grade.name|currentLang}}</h4>
                            </div>
                            <div class="col-md-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'dashboard.students.isChildOfAMartyr' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.isChildOfAMartyr ? ('shared.yes'|translate) : ('shared.no'|translate)}}</h4>
                            </div>
                            <div class="col-md-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'dashboard.students.childWithDisabilities' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.isSpecialAbilities? ('shared.yes'|translate) : ('shared.no'|translate) }}</h4>
                            </div>
                            <div class="col-md-4 d-flex align-items-center gap-5" *ngIf="requestDetails.isSpecialAbilities">
                                <ng-container>
                                    <p class="color-gray-300 fs-4">{{'shared.classroom' | translate}}</p>
                                    <h4 class="color-primary"  *ngIf="requestDetails.isSpecialClass">{{'shared.specialClass' | translate}}</h4>
                                    <h4 class="color-primary"  *ngIf="requestDetails.isInFusionClass">{{'shared.fusionClass' | translate}}</h4>
                                </ng-container>
                            </div>
                            <div class="col-md-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'dashboard.parents.specialEducation' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.isSpecialEducation? ('shared.yes'|translate) : ('shared.no'|translate) }}</h4>
                            </div>
                            <div class="col-md-4 d-flex align-items-center gap-5" *ngIf="requestDetails.isSpecialEducation">
                                <p class="color-gray-300 fs-4">{{'dashboard.parents.specialEducationtype' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.specialEducation.name|currentLang}}</h4>
                            </div>
             
                            <ng-container *ngTemplateOutlet="attachments; context: {$implicit: requestDetails.requestAttachments}" ></ng-container>
                        </div>
                    </div>

                    <!-- NOTE:-------------- طلب تسجيل الابن المنسحب-->
                    <div *ngSwitchCase="requetsaEnum.RegestrationRequestForWithrawan">
                        <div class="row g-4">
                            <div class="col-md-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'shared.school' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.school.name|currentLang}}</h4>
                            </div>
                            <div class="col-md-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'shared.grade' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.grade.name|currentLang}}</h4>
                            </div>
                            <div class="col-md-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'dashboard.students.isChildOfAMartyr' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.student.isChildOfAMartyr ? ('shared.yes'|translate) : ('shared.no'|translate)}}</h4>
                            </div>
                            <div class="col-md-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'dashboard.students.childWithDisabilities' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.student.isSpecialAbilities? ('shared.yes'|translate) : ('shared.no'|translate) }}</h4>
                            </div>
                            <div class="col-md-4 d-flex align-items-center gap-5" *ngIf="requestDetails.isSpecialAbilities">
                                <ng-container>
                                    <p class="color-gray-300 fs-4">{{'shared.classroom' | translate}}</p>
                                    <h4 class="color-primary"  *ngIf="requestDetails.student.isSpecialClass">{{'shared.specialClass' | translate}}</h4>
                                    <h4 class="color-primary"  *ngIf="requestDetails.student.isInFusionClass">{{'shared.fusionClass' | translate}}</h4>
                                </ng-container>
                            </div>
                            <div class="col-md-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'dashboard.parents.specialEducation' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.student.isSpecialEducation? ('shared.yes'|translate) : ('shared.no'|translate) }}</h4>
                            </div>
                            <div class="col-md-4 d-flex align-items-center gap-5" *ngIf="requestDetails.isSpecialEducation">
                                <p class="color-gray-300 fs-4">{{'dashboard.parents.specialEducationtype' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.student.specialEducation.name|currentLang}}</h4>
                            </div>
             
                            <ng-container *ngTemplateOutlet="attachments; context: {$implicit: requestDetails.student.attachments}" ></ng-container>
                        </div>
                    </div>

                    <!-- NOTE:-------------- طلب نقل جماعى-->
                    <div *ngSwitchCase="requetsaEnum.MassTransferRequest">

                    </div>

                    <!-- NOTE:-------------- طلب تعديل هويه-->
                    <div *ngSwitchCase="requetsaEnum.ModifyIdentityRequest">
                        <div class="col-4 d-flex align-items-center gap-5">
                            <p class="color-gray-300 fs-4">{{'shared.Identity Number' | translate}}</p>
                            <h4 class="color-primary">{{requestDetails.NewIdentityNumber}}</h4>
                        </div>
                        <ng-container *ngTemplateOutlet="attachments; context: {$implicit: requestDetails.requestAttachments}" ></ng-container>
                    </div>

                    <!-- NOTE:-------------- طلب تعديل هويه للطالب الذى لايملك هويه-->
                    <div *ngSwitchCase="requetsaEnum.ModifyIdentityRequestCaseStudentNotHaveId">
                        <div class="fw-bold fs-4 mb-5">{{'dashboard.students.newIdentityInfo' | translate}}</div>
                        <div class="row  g-4">
                            <div class="col-md-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'dashboard.parents.studentName' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.name|currentLang}}</h4>
                            </div>
                            <div class="col-md-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'dashboard.parents.studentNickname' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.nickName|currentLang}}</h4>
                            </div>
                            <div class="col-md-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'shared.birthDay' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.birthDate | currentLang}}</h4>
                            </div>
                            <div class="col-md-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'shared.gender' | translate}}</p>
                                <h4 class="color-primary mb-2" *ngIf="requestDetails?.gender=='Female'">{{'shared.genderType.Female'|translate}}</h4>
                                <h4 class="color-primary mb-2" *ngIf="requestDetails?.gender=='Male'">{{'shared.genderType.Male'|translate}}</h4>
                            </div>
                            <div class="col-md-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'shared.nationality' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.religionName |currentLang}}</h4>
                            </div>
                            <div class="col-md-4 d-flex align-items-center gap-5">
                                <p class="color-gray-300 fs-4">{{'shared.religion' | translate}}</p>
                                <h4 class="color-primary">{{requestDetails.nationalityName |currentLang}}</h4>
                            </div>
              
                        </div>
                    </div>

                    <!-- NOTE:-------------- طلب انسحاب الطالب من المدرسه-->
                    <div *ngSwitchCase="requetsaEnum.WithdrawalRequest">
                        <div class="col-4 d-flex align-items-center gap-5">
                            <p class="color-gray-300 fs-4">{{'dashboard.students.withdrawalType' | translate}}</p>
                            <h4 class="color-primary">{{requestDetails.WithdrawalType | currentLang}}</h4>
                        </div>
                        <div class="col-4 d-flex align-items-center gap-5">
                            <p class="color-gray-300 fs-4">{{'shared.cause' | translate}}</p>
                            <h4 class="color-primary">{{requestDetails.cause}}</h4>
                        </div>
                        <ng-container *ngTemplateOutlet="attachments; context: {$implicit: requestDetails.requestAttachments}" ></ng-container>
                    </div>

                    <!-- NOTE:-------------- طلب اعاده ربط الابن بولى امر جديد-->
                    <div *ngSwitchCase="requetsaEnum.RelinkChildToGuardianRequestToScool">
                        <div class="col-4 d-flex align-items-center gap-5 mt-5 ">
                            <p class="color-gray-300 fs-4 ">{{'dashboard.myRequest.The name of the new guardian' | translate}}</p>
                            <h4 class="color-primary">{{requestDetails.guardian.name |currentLang}}</h4>
                        </div>
                    </div>

                    <!-- NOTE:-------------- طلب اعاده ربط الابن بولى امر جديد-->
                    <div *ngSwitchCase="requetsaEnum.RelinkChildToGuardianRequestToSPEA">output</div>
                    <div *ngSwitchDefault>output2</div>
                </div>


            </ng-container>

        </div>




<ng-template #studentProfile let-student>
    <div class="profile d-flex align-items-center ">
        <div class="profile__avatar ">
            <img [src]="student?.parsonalImagePath " onerror="this.src='assets/images/shared/image.svg'"  alt="Avatar ">
        </div>
        <div class="profile__info ">
            <div class="profile__name ">
                <h4 class="heading heading--tertiary ">{{student.name |currentLang}}</h4>
                <div class="" *ngIf="student.isTalented">
                    <img src="assets/images/shared/medal.svg" alt="">
                    <span class="color-red-500">{{'dashboard.students.talent' |translate}}</span>
                </div>
                <div *ngIf="student.isChildOfAMartyr">
                    <img src="assets/images/shared/medal-flag.svg" alt="">
                    <span class="color-fuchsia-500">{{'dashboard.students.isChildOfAMartyr' |translate}}</span>
                </div>
            </div>
            <div class="profile__details ">
                <div class="fs-4 ">
                    <img src="assets/images/shared/child.svg" alt="">
                    <span class="color-gray-300 fs-4 ">{{student.age}} سنه</span>
                </div>
                <div>
                    <!-- <img *ngIf="student.regestered " src="assets/images/shared/fingure.svg " alt=" "> -->
                    <img  src="assets/images/shared/fingur-blue.svg " alt=" ">
                    <div [ngSwitch]="status">
                        <div class="color-gray-300" *ngSwitchCase="statusEnum.Registered">{{'shared.allStatus.Registered' | translate}}</div>
                        <div class="color-red-500-300" *ngSwitchCase="statusEnum.Unregestered">{{'shared.allStatus.Unregestered' | translate}}</div>
                        <div class="color-red-500-300" *ngSwitchCase="statusEnum.WithdrawnRejected">{{'shared.allStatus.WithdrawnRejected' | translate}}</div>
                        <div class="color-red-500" *ngSwitchCase="statusEnum.Deleted">{{'shared.allStatus.Deleted' | translate}}</div>
                        <div class="color-red-500" *ngSwitchCase="statusEnum.Withdrawn">{{'shared.allStatus.Withdrawn' | translate}}</div>
                        <div class="color-gray-500" *ngSwitchCase="statusEnum.Transferd">{{'shared.allStatus.Transferd' | translate}}</div>
                        <div class="color-gray-300" *ngSwitchDefault>{{'shared.registerd' | translate}}</div>
                        
                    </div>
                </div>
                <div>
                    <!-- <img *ngIf="student.regestered " src="assets/images/shared/fingure.svg " alt=" "> -->
                    <img src="assets/images/shared/fingur-blue.svg " alt=" ">
                    <span class="color-gray-300 fs-4 ">
                        {{student.grade.name|currentLang}}
                     </span>
                </div>

            </div>

        </div>
    </div>

    <div class="mb-5">
        <div class="row gap-6 mt-5 ">
            <div class="col-4 d-flex align-items-center gap-5 " *ngIf="student?.identityNum">
                <p class="color-gray-300 fs-4 ">{{'dashboard.myRequest.Personal identification number' | translate}}</p>
                <h4 class="color-primary">{{student.identityNum}}</h4>
            </div>
            <div class="col-4 d-flex align-items-center gap-5 ">
                <p class="color-gray-300 fs-4 ">{{'dashboard.myRequest.Date of Birth' | translate}}</p>
                <h4 class="color-primary">{{student.birthDate |LocalizeDate}}</h4>
            </div>
            <div class="col-4 d-flex align-items-center gap-5 ">
                <p class="color-gray-300 fs-4 ">{{'dashboard.myRequest.Nationality' | translate}}</p>
                <h4 class="color-primary">{{student.nationality?.name |currentLang}}</h4>
            </div>
            <!-- <div class="col-4 d-flex align-items-center gap-5 ">
                <p class="color-gray-300 fs-4 ">{{'dashboard.myRequest.gender' | translate}}</p>
                <h4 class="color-primary">{{student.gender}}</h4>
            </div>
            <div class="col-4 d-flex align-items-center gap-5 mt-5 ">
                <p class="color-gray-300 fs-4 ">{{'dashboard.myRequest.The name of the new guardian' | translate}}</p>
                <h4 class="color-primary">{{student.parentName.ar}}</h4>
            </div>


            <div class="col-4 d-flex align-items-center gap-5 mt-5 ">
                <p class="color-gray-300 fs-4 ">{{'dashboard.myRequest.join type' | translate}}</p>
                <h4 class="color-primary">{{student.relation.ar}}</h4>
            </div> -->

        </div>
        <!-- <div class="col-md-12 d-flex align-items-center mt-5 ">
            <span>{{'dashboard.myRequest.Student attachments' | translate}} </span>
        
            <div *ngFor="let item of student.attachments; let i = index" class="icon--file m-4 ">
                <app-file [name]="item.name.ar" [url]="item.url"></app-file>
            </div>
        </div> -->
    </div>
</ng-template>


<ng-template #certificatesRequests let-certificate>
    <div  [ngSwitch]="certificate.certificateType">
        <!-- NOTE :---------------- Case 1 شهاده الدرجات-->
        <div class="row" *ngSwitchCase="certificateEnum.GradesCertificate">
            <div class="col-4 d-flex align-items-center gap-5">
                <p class="color-gray-300 fs-4">{{'dashboard.issue of certificate.type of certificate' | translate}}</p>
                <h4 class="color-primary">{{'dashboard.issue of certificate.' + certificate.certificateType | translate}}</h4>
            </div>
                  
            <div class="col-4 d-flex align-items-center gap-5">
                <p class="color-gray-300 fs-4">{{'dashboard.students.academic year' | translate}}</p>
                <h4 class="color-primary">{{certificate.SchoolYear  |currentLang}}</h4>
            </div>
                
            <div class="col-4 d-flex align-items-center gap-5">
                <p class="color-gray-300 fs-4">{{'dashboard.issue of certificate.degreesCertificateType' | translate}}</p>
                <h4 class="color-primary">{{'dashboard.issue of certificate.' + certificate.gradeCertificateType | translate}}</h4>
            </div>
        </div>

        <!-- NOTE :---------------- Case 2 شهاده التسلسل الدراسى  -->
        <div class="row" *ngSwitchCase="certificateEnum.AcademicSequenceCertificate">
            <div class="col-4 d-flex align-items-center gap-5 mb-5">
                <p class=" fs-4 fw-bold">{{'dashboard.issue of certificate.type of certificate' | translate}}</p>
                <h4 class="color-primary">{{'dashboard.issue of certificate.' + certificate.certificateType | translate}}</h4>
            </div>

            <div class="row mb-4" *ngFor="let item of certificate.SchoolYears" >
                <div class="col-4 d-flex align-items-center gap-5">
                    <p class="color-gray-300 fs-4">{{'dashboard.students.academic year' | translate}}</p>
                    <h4 class="color-primary">{{item.SchoolYear  |currentLang}}</h4>
                </div>
                <div class="col-4 d-flex align-items-center gap-5">
                    <p class="color-gray-300 fs-4">{{'shared.school' | translate}}</p>
                    <h4 class="color-primary">{{item.schoolName |currentLang}}</h4>
                </div>
                <div class="col-4 d-flex align-items-center gap-5">
                    <p class="color-gray-300 fs-4">{{'shared.grade' | translate}}</p>
                    <h4 class="color-primary">{{item.gradeName |currentLang}}</h4>
                </div>
            </div>
        </div>

        <!-- NOTE :---------------- Case 2 بقيه الشهادات -->
        <div *ngSwitchDefault>
            <div class="row">
                <div class="col-4 d-flex align-items-center gap-5">
                    <p class="color-gray-300 fs-4">{{'dashboard.issue of certificate.type of certificate' | translate}}</p>
                    <h4 class="color-primary">{{'dashboard.issue of certificate.' + certificate.certificateType | translate}}</h4>
                </div>
                <div class="col-4 d-flex align-items-center gap-5">
                    <p class="color-gray-300 fs-4">{{'shared.cause' | translate}}</p>
                    <h4 class="color-primary">{{certificate.cause}}</h4>
                </div>
                          
                <div class="col-md-12 d-flex align-items-center mt-5 gap-5">
                    <span>{{'dashboard.Requests.requestAttachments' | translate}} </span>
                    <div  class="col-md-3" *ngFor="let item of certificate.attachments">
                        <app-file [name]="item.name.ar" [url]="item.url"></app-file>
                    </div>
                </div>
            </div>
        </div>

    </div>
</ng-template>

<ng-template #attachments let-attachments>
    <div class="col-md-12 d-flex align-items-center mt-5 gap-5" *ngIf="attachments?.length">
        <span>{{'dashboard.Requests.requestAttachments' | translate}} </span>
        <div  class="col-md-3" *ngFor="let item of attachments">
            <app-file [name]="item.name" [url]="item.url"></app-file>
        </div>
    </div>
</ng-template>


<ng-template #loader>
    <div class="row g-5">
        <div class="col-md-4">
            <app-skeleton count="2" [style]="{'margin-bottom': '3rem'}"></app-skeleton>
        </div>
        <div class="col-md-4">
            <app-skeleton count="2" [style]="{'margin-bottom': '3rem'}"></app-skeleton>
        </div>
        <div class="col-md-4">
            <app-skeleton count="2" [style]="{'margin-bottom': '3rem'}"></app-skeleton>
        </div>
    </div>
</ng-template>


<ng-template #commentLoader>
    <div class="row">
        <div class="col-md-12">
            <app-skeleton count="1" [style]="{'margin-bottom': '3rem'}"></app-skeleton>
        </div>
    </div>
    <div class="row g-5">
        <div class="col-md-12">
            <app-skeleton count="4" [style]="{'margin-bottom': '3rem', 'height':'10rem'}"></app-skeleton>
        </div>
    </div>
</ng-template>




<p-dialog header="{{'dashboard.Requests.rejectReason' | translate}}" [(visible)]="rejectReasonModel" [draggable]="false" [modal]="true" [style]="{width: '40vw'}">

    <ng-template pTemplate="content">

        <div class="custom-form" ngForm #f="ngForm">
            <label class="label">{{'dashboard.Requests.rejectReason'| translate}}</label>
            <input 
            *ngIf="actionTaken.isCommentRequired"
            type="text" 
            [(ngModel)]="reqActionsForm.comments"
            name="comment" pInputText 
            placeholder="{{'dashboard.myRequest.You can add a comment here' | translate}}"/>

            <p-dropdown 
            [(ngModel)]="reqActionsForm.rejectionReasonId"
            *ngIf="!actionTaken.isCommentRequired"
            name="cause"
            [options]="rejectReason$|async" 
            optionValue="id"
            optionLabel="{{lang=='ar'? 'name.ar' : 'name.en'}}" 
            placeholder="{{'dashboard.Requests.rejectReason'|translate}}" [required]="!actionTaken.isCommentRequired"></p-dropdown>
        </div>

        <!-- Uploader -->
        <app-file-upload view="full" (onFileUpload)="addAttachmentToAction($event)"></app-file-upload>


        <div class="d-flex justify-content-end mt-6 mb-4" >
            <button class="btn btn-primary" 
            (click)="completeRequestAction()" 
            [disabled]="!f.valid || isLoading">{{'shared.confirm'| translate}}
            <div class="spinner-border text-light" role="status" *ngIf="isLoading"></div>
        </button>
        </div>
    </ng-template>

</p-dialog>
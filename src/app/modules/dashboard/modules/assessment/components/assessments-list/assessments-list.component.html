<ng-container *permit="claimsEnum.S_AddEvaluation">
<app-add-btn bg-primary [backGroundColor]="'btn-outline-primary'" [route]="'/dashboard/educational-settings/assessments/new-assessment'" [content]="'breadcrumb.AddASSesment'">
    <fa-icon [icon]="plusIcon" class="icon "></fa-icon>
</app-add-btn>
</ng-container>
<div class="prim-table" *ngIf="assessmentList.totalAllData || assessmentList.loading">


    <p-table #dt [value]="assessmentList.list" (onSort)="onSort($event)" [lazy]="true">

        <!-- Table Caption -->
        <ng-template pTemplate="caption">
            <app-table-caption (onExport)="onExport($event)" (onFilter)="filtration.Page=1;getRate()" (onSearch)="filtration.Page=1;filtration.KeyWord = $event; getRate()" (onClear)="clearFilter()">
                <div class="row gx-5 form-set">
                    <div class="col-lg-4">
                        <label class="label">{{'shared.activated'|translate}}</label>
                        <p-dropdown [(ngModel)]="filtration.status" [showClear]="true" StopProp [options]="filteration_status" optionValue="code" optionLabel="name" placeholder="{{'dashboard.Assessment.AssessmentStatus'|translate }}"></p-dropdown>
                    </div>
                </div>

            </app-table-caption>

        </ng-template>
    </p-table>

    <div class="row g-5">
        <ng-container *ngIf="assessmentList.list.length > 0">
            <ng-container *ngFor="let rate of assessmentList.list">
                <div class="col-md-4 col-sm-12 ml-3 align-self-center">
                    <p-card class="radius-5 card-evaluation">
                        <ng-template pTemplate="header" class="row ">
                            <div class="d-flex p-4 bg-gray-50 radius-5">
                                <div class="col-md-6 ">
                                    <h3 class="color-primary  fs-3">{{rate.name|currentLang}}</h3>
                                </div>

                                <div class="col-md-6 mt-3 " *ngIf="isAdmin">
                                    <label class="Label fs-3 m-3 fw-300">{{'shared.activated'|translate}}</label>
                                    <p-inputSwitch  readonly="true" [(ngModel)]="rate.isActive" id="switchbtn"></p-inputSwitch>
                                    <span class="Label" *ngIf="!rate.isActive">{{'shared.no'|translate}}</span>
                                    <span class="Label" *ngIf="rate.isActive">{{'shared.yes'|translate}}</span>
                                </div>
                            </div>
                        </ng-template>
                        <div class="row gx-5 mt-3   radius-5">
                            <div class="col-md-6 text-center">
                                <div class="color-skyBlue-500">{{'dashboard.Assessment.Minmum Degree'|translate}}</div>
                                <div class="color-skyBlue-500 fw-bold"> {{rate.min}} </div>
                            </div>
                            <div class="col-md-6 text-center">
                                <div class="color-skyBlue-500"> {{'dashboard.Assessment.Maximum Degree'|translate}}</div>
                                <div class="color-skyBlue-500  fw-bold">{{rate.max}}</div>
                            </div>
                        </div>
                        <!-- <div class="row gx-5 px-3   radius-5">
                            <div class="col-md-6">

                                <span class="color-skyBlue-500 Minmum fw-500"> {{rate.min}} </span>
                            </div>
                            <div class="col-md-6">
                                <span class="color-skyBlue-500  Minmum fw-500">{{rate.max}}</span>
                            </div>
                        </div> -->
                        <div class="row gx-5 p-3   radius-5">
                        <span class="mt-4  fw-bold">{{'dashboard.Assessment.AssessmentTable'|translate}}</span>
                        </div>
                        <div class=" px-3 " id="cardSize">

                            <ng-container  *ngIf="rate.rateScores.length > 0">
                              <div class="d-flex my-3">
                                <div class="col-md-4 fw-bold">
                                    <p class="color-skyBlue-300 fs-5">{{'dashboard.Assessment.RatingCode'|translate}}</p>
                                </div>
                                <div class="col-md-3 fw-bold">
                                    <p class="color-skyBlue-300 fs-5">{{'reports.Assessment.result'|translate}}</p>
                                </div>
                                <div class="col-md-4 fw-bold">
                                    <p class="color-skyBlue-300 fs-5">{{'dashboard.Assessment.degreeLimit'|translate}}</p>
                                </div>
                              </div>
                                <ng-container *ngFor="let sc of rate.rateScores">
                                  <div class="d-flex">
                                    <div class="col-md-4">
                                        <ul>
                                            <li class="symbol-one color-primary m-3 fs-3 fw-700 bg-gray-30 radius-5">{{sc.code}}</li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3">
                                        <ul>
                                            <li class="color-primary m-3 pt-3 fs-4 fw-700">
                                                {{ 'dashboard.Assessment.' + (sc.isSuccess ? 'successful' : 'unSuccessful') | translate}}
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-4">
                                        <ul>
                                            <li class="m-3 pt-3 fs-4">
                                                <!-- <p class="color-gray-300 fs-4">{{'dashboard.Assessment.Deserving Degrees'|translate}}</p> -->
                                                <span class="color-black mb-4 degrees">  {{'dashboard.Assessment.From'|translate}} {{sc.from}} {{'dashboard.Assessment.To'|translate}}{{sc.to}}</span>
                                            </li>
                                        </ul>
                                    </div>
                                  </div>
                                </ng-container>
                            </ng-container>
                        </div>
                        <ng-template pTemplate="footer ">
                            <div class="row mb-3 mt-3">
                                <div class="col-md-10" *permit="claimsEnum.S_EditEvaluation">
                                    <button class="btn btn-primary edit-evaluation" (click)="navigateToEditAssessment(rate.id) " width="120">
                                      <img src="assets/images/shared/pen.svg" alt="">
                                        {{'shared.Edit'|translate}}
                                    </button>
                                </div>
                                <div class="col-md-2" *permit="claimsEnum.S_DeleteEvaluation">
                                    <button (click)="this.confirmModelService.openModel();  selectedRate=rate.id;">
                                        <img src=" assets/images/shared/DeleteRate.svg " alt="delete file ">
                                    </button>
                                </div>
                            </div>


                        </ng-template>
                    </p-card>
                </div>
            </ng-container>
        </ng-container>
    </div>
    <div *ngIf="assessmentList.total> paginationState.rows">
        <app-pagination [totalItems]="assessmentList.total" (paginationChanged)="paginationChanged($event)"></app-pagination>
    </div>


    <div class="d-flex ms-5" *ngIf="assessmentList.loading">
        <app-skeleton size="38rem" [style]="{'margin-bottom': '5rem','margin-left': '3rem'}" count="2"></app-skeleton>
        <app-skeleton size="38rem" [style]="{'margin-bottom': '5rem','margin-left': '3rem'}" count="2"></app-skeleton>
        <app-skeleton size="38rem" [style]="{'margin-bottom': '5rem','margin-left': '3rem'}" count="2"></app-skeleton>
    </div>

</div>
<!-- emptyList -->
<ng-container *ngIf="!assessmentList.totalAllData && !assessmentList.loading">
    <app-informative-block title="{{'emptyList.Assessment List is empty' |translate}}" src="assets/images/empty-list/empty-list.svg"></app-informative-block>
</ng-container>

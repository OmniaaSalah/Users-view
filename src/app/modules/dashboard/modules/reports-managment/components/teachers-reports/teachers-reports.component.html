



<div class="report form-set custom-form">


    <!-- <div class="box-shadow bg-white raduis-12 my-3 p-5">
        <h3 class="mb-5 heading heading-secondary text-underline m-0">{{'dashboard.reports.The columns that you want to add to the table'|translate}}</h3>
    <div class="row custom-form">
        <ng-container *ngFor="let item of tableColumns">
            <div class="col-12 col-md-2 d-flex align-items-center gap-4 mb-5 mx-2">
                <p-checkbox (onChange)="checkValueOfCheckbox($event,item)" [disabled]="item.isDisabled" [(ngModel)]="item.isSelected"
                    [binary]="true"></p-checkbox>

                <label class="label label--sm" for=""> {{item.name}} </label>
            </div>
        </ng-container>
    </div>
    </div> -->


    <div class="prim-table mt-4" *ngIf="teachersReport.totalAllData || teachersReport.loading">
        <p-table #dt [value]="teachersReport.list" [lazy]="true" (onSort)="onSort($event)">

            <ng-template pTemplate="caption">
                <app-table-caption 
                (onExport)="onExport($event)" 
                (onFilter)="getTeachersReportList()" 
                (onSearch)="filtration.KeyWord = $event; getTeachersReportList()" 
                (onClear)="clearFilter()">
            
                  
                    <div class="row gx-5 form-set">
                        <div class="col-12">
                            <label class="label">{{'dashboard.students.schoolName'| translate}}</label>
                            <p-multiSelect [options]="(schools$| async)?.data" display="chip" [(ngModel)]="filtration.schoolIds"   optionValue="id"  placeholder="{{'shared.chooseSchool'|translate }}" optionLabel="name.ar"></p-multiSelect>
                        </div>
                    </div>
                    <div class="row gx-5 form-set">
                        <div class="col-12">
                            <label class="label" for="curriculum">{{'dashboard.SchoolYear.Subject'|translate}}  </label>
            
                            <p-multiSelect [options]="(subjects$| async)?.data" display="chip" [(ngModel)]="filtration.subjectIds"   optionValue="id" placeholder="{{'dashboard.SchoolYear.Select Subject'|translate}}" optionLabel="subjectName.ar"></p-multiSelect>
            
                        </div>
                       
                    </div>
                </app-table-caption>
            
            </ng-template>


            <ng-template pTemplate="header" let-columns="columns">
                <tr>
                    <ng-container *ngFor="let column of tableColumns" >
                        <th [pSortableColumn]="column.name.ar" *ngIf="column.isSelected == true"> 
                            <!-- studentsReportsArray -->
                            <p-sortIcon field="{{column.name }}"></p-sortIcon>{{column.name }}
                        </th>
                    </ng-container>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-teacher>
                <tr>
                    <ng-container>
                        <td>
                            {{teacher?.schoolName| currentLang}} 
                        </td>
                        <td>
                            {{teacher?.subjectName | currentLang}} 
                        </td>
                        <td>
                            {{teacher?.teachersCount}}
                        </td>
                        <td *ngIf="teacher?.teacherName">
                            {{teacher?.teacherName | currentLang}}
                        </td>
                        <td *ngIf="!teacher?.teacherName">
                            {{'shared.notFound' | translate}}
                        </td>
                        <td  *ngIf="teacher?.teacherField">
                            {{teacher?.teacherField | currentLang}}
                        </td>
                        <td  *ngIf="!teacher?.teacherField">
                            {{'shared.notFound' | translate}}
                        </td>

                        <td>
                            {{teacher?.sbjectWeeklyHours}}
                        </td>
     
                    </ng-container>
                    
                </tr>
            </ng-template>

            <ng-template pTemplate="emptymessage" let-columns>
                <tr>
                    <td [attr.colspan]="20">
                        <ng-container *ngIf="!teachersReport.total &&  !teachersReport.loading">
                            <app-informative-block subTitle="{{'emptyList.noDataMatch' |translate}}"
                                src="assets/images/empty-list/empty-list.svg"></app-informative-block>
                        </ng-container>

                        <app-loader></app-loader>
                    </td>
                </tr>
            </ng-template>
        </p-table>

        <div class="" *ngIf="teachersReport.total  > paginationState.rows">
            <app-pagination [totalItems]="teachersReport.total"
                (paginationChanged)="paginationChanged($event)"></app-pagination>
        </div>
    </div>

    <ng-container *ngIf="!teachersReport.totalAllData && !teachersReport.loading">
        <app-informative-block title="{{'emptyList.teachers' |translate}}"
            src="assets/images/empty-list/empty-list.svg"></app-informative-block>
    </ng-container>
</div>


<div class="d-flex justify-content-end">
    <button class="btn btn-outline-primary btn--md mb-5" (click)="openAddClassModel()">
        <span>{{'dashboard.schools.addClass'|translate}} </span>
        <fa-icon class="icon" [icon]="faPlus"></fa-icon>
    </button>
</div>
<app-calender [events]="events"></app-calender>


<p-dialog header="اضافه حصه" [(visible)]="addClassModelOpened" [draggable]="false" [modal]="true" [style]="{width: '50vw'}">
    <ng-template pTemplate="content">
        <form class="custom-form" [formGroup]="sessionTimeForm">

            <div class="row form-set">
                <div class="col">
                    <label class="label" for="day">{{'shared.day'|translate}} </label>
                    <p-dropdown [options]="days" name="day" formControlName="day"inputId="day" optionLabel="name" placeholder="الاتنين"></p-dropdown>
                </div>
            </div>

            <div class="row gx-5 form-set">

                <div class="col-md-6">
                    <label class="label" for="classTime">{{'dashboard.schools.classStartTime'|translate}}</label>
                    <p-calendar 
                    formControlName="startTime" 
                    [timeOnly]="true" 
                    [hourFormat]="12" 
                    icon="pi pi-clock" 
                    [showIcon]="true" 
                    name="startTime" 
                    placeholder="15:30 PM - 17:00PM"
                    (onSelect)="selectedStartTime($event)"></p-calendar>
                </div>

                <div class="col-md-6">
                    <label class="label" for="classTime">{{'dashboard.schools.classEndTime'|translate}}</label>
                    <p-calendar 
                    [ngClass]="{'ng-invalid ng-dirty': sessionFormCtr.endTime.errors && sessionFormCtr.endTime.errors?.['not']}" 
                    formControlName="endTime" 
                    [timeOnly]="true" 
                    [hourFormat]="12" 
                    icon="pi pi-clock" 
                    [showIcon]="true" 
                    [disabledDates]="" name="endTime" 
                    placeholder="15:30 PM - 17:00PM" 
                    (onSelect)="selectedEndTime($event)"></p-calendar>

                    <div class="errors" *ngIf="sessionFormCtr.endTime.invalid && (sessionFormCtr.endTime.dirty)">
                        <div class="color-red-500" *ngIf="sessionFormCtr.endTime.errors?.['not']">يجب ان يكون وقت نهايه الحصه بعد وقت البدايه</div>
                        <div class="color-red-500" *ngIf="sessionFormCtr.endTime.errors?.['outRang']">خارج ساعات العمل المحدده</div>
                    </div>
                </div>
            </div>

            <div class="d-flex  align-items-center justify-content-end mt-5">
                <button class="btn btn-primary btn--sm" (click)="addClassSchedule($event)" [disabled]="sessionTimeForm.invalid || isSubmitted">
                    <div class="spinner-border text-light" role="status" *ngIf="isSubmitted"></div>
                    <span>{{'shared.save'| translate}} </span>
                </button>
            </div>
        </form>
    </ng-template>
</p-dialog>
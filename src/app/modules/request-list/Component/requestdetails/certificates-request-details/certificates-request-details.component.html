
<div  [ngSwitch]="requestDetails.requestType">
    <!-- NOTE :---------------- Case 1 شهاده الدرجات-->
    <div class="row" *ngSwitchCase="requestTypeEnum.GradesCertificateRequest">
        <div class="col-4 d-flex align-items-center gap-5">
            <p class="color-gray-300 fs-4">{{'issue of certificate.type of certificate' | translate}}</p>
            <h4 class="color-primary">{{'Requests.' + requestDetails.requestType | translate}}</h4>
        </div>

        <div class="col-4 d-flex align-items-center gap-5">
            <p class="color-gray-300 fs-4">{{'students.academic year' | translate}}</p>
            <h4 class="color-primary">{{requestDetails.schoolYear  |currentLang}}</h4>
        </div>

        <div class="col-4 d-flex align-items-center gap-5" *ngIf="requestDetails?.gradeCertificateType">
            <p class="color-gray-300 fs-4">{{'issue of certificate.degreesCertificateType' | translate}}</p>
            <h4 class="color-primary">{{'issue of certificate.' + requestDetails.gradeCertificateType | translate}}</h4>
        </div>
    </div>

    <!-- NOTE :---------------- Case 2 شهاده التسلسل الدراسى  -->
    <div class="row" *ngSwitchCase="requestTypeEnum.AcademicSequenceCertificateRequest">
        <div class="col-4 d-flex align-items-center gap-5 mb-5">
            <p class=" fs-4 fw-bold">{{'issue of certificate.type of certificate' | translate}}</p>
            <h4 class="color-primary">{{'Requests.' + requestDetails.requestType | translate}}</h4>
        </div>

        <div class="row g-4" *ngFor="let item of requestDetails?.schoolYears" >
          <ng-container *ngIf="!item?.newSequence">
            <div class="col-4 d-flex align-items-center gap-5">
                <p class="color-gray-300 fs-4">{{'students.academic year' | translate}}</p>
                <h4 class="color-primary">{{item.schoolYear?.name  |currentLang}}</h4>
            </div>
            <div class="col-4 d-flex align-items-center gap-5">
                <p class="color-gray-300 fs-4">{{'shared.school' | translate}}</p>
                <h4 class="color-primary">{{item.schoolName?.name |currentLang}}</h4>
            </div>
            <div class="col-4 d-flex align-items-center gap-5">
                <p class="color-gray-300 fs-4">{{'shared.grade' | translate}}</p>
                <h4 class="color-primary">{{item.gradeName?.name |currentLang}}</h4>
            </div>
          </ng-container>
        </div>



        <ng-container [formGroup]="stdAcademicForm">
          <ng-container formArrayName="addedAcademicSequence">
            <div class="row gx-5 mb-4 custom-form" *ngFor="let student of getStudentNewAccademicArrCtr().controls; let ctrIndex=index" [formGroupName]="ctrIndex">

                <div class=" col-md-3" *ngIf="oldSchoolYears$ |async as schoolYears">
                    <label class="label">{{'students.academic year'|translate}}</label>
                    <p-dropdown [options]="schoolYears" optionLabel="{{lang=='ar'? 'name.ar' :'name.en'}}" formControlName="yearId" optionValue="id" placeholder="{{'SchoolYear.Select School Year' | translate}}" ></p-dropdown>
                </div>


                <div class="col-md-4" *ngIf="OldSchools$ |async as allSchools">
                    <label class="label">{{'students.School Name'| translate}}</label>
                    <p-dropdown placeholder="{{'students.School Name'| translate}}"
                        [options]="allSchools" formControlName="schoolId"
                        optionLabel="{{lang=='ar'? 'name.ar' :'name.en'}}" optionValue="id"></p-dropdown>
                </div>

                <div class="col-md-3" *ngIf="allGrades$ |async as allGrades">
                    <label class="label">{{'students.Class'|translate}}</label>
                    <p-dropdown placeholder="{{'students.Class'|translate}}"
                    [options]="allGrades"
                        formControlName="gradeId" optionLabel="{{lang=='ar'? 'name.ar' :'name.en'}}"
                        optionValue="id"></p-dropdown>

                </div>
            </div>
          </ng-container>
        </ng-container>

        <div class="d-flex justify-content-end my-5">
          <button class=" btn btn-primary btn--sm px-5"
          (click)="updateAcademicSequesnceReq()">
              <div class="spinner-border text-light" role="status" *ngIf="isBtnLoading"></div>
              <span>{{'shared.saveChanges' |translate}}</span>
          </button>
        </div>
    </div>

    <!-- NOTE :---------------- Case 2 بقيه الشهادات -->
    <div *ngSwitchDefault>
        <div class="row">
            <div class="col-4 d-flex align-items-center gap-5">
                <p class="color-gray-300 fs-4">{{'issue of certificate.type of certificate' | translate}}</p>
                <h4 class="color-primary">{{'Requests.' + requestDetails.requestType | translate}}</h4>
            </div>
            <div class="col-4 d-flex align-items-center gap-5" *ngIf="requestDetails.cause">
                <p class="color-gray-300 fs-4">{{'shared.cause' | translate}}</p>
                <h4 class="color-primary">{{requestDetails.cause}}</h4>
            </div>

            <div class="col-md-12 d-flex align-items-center mt-5 gap-5">
                <span class="flex-shrink-0">{{'Requests.requestAttachments' | translate}} </span>
                <ng-container *ngTemplateOutlet="attachments; context: {$implicit: requestDetails.requestAttachments}" ></ng-container>
            </div>
        </div>
    </div>

</div>


<ng-template #attachments let-attachments let-showText="showText">
  <div class=" d-flex align-items-center flex-grow-1 mt-5 gap-5" *ngIf="attachments?.length">
      <span class="flex-shrink-0" *ngIf="showText">{{'Requests.requestAttachments' | translate}} </span>
      <div  class="col-md-3" *ngFor="let item of attachments">
          <app-file [file]="item"></app-file>
      </div>
  </div>
</ng-template>
